# Playwright MCP Server
# Based on: https://github.com/microsoft/playwright-mcp
FROM node:22-slim

# Install dependencies for Playwright
RUN apt-get update && apt-get install -y \
    curl \
    && rm -rf /var/lib/apt/lists/*

# Install Playwright MCP globally
RUN npm install -g @anthropic-ai/mcp-playwright@latest || npm install -g @anthropic-ai/playwright-mcp@latest || npm install -g @playwright/mcp@latest

# Install Playwright browsers
RUN npx playwright install chromium --with-deps

# Create output directory
RUN mkdir -p /tmp/playwright-output && chmod 1777 /tmp/playwright-output

EXPOSE 8931

# Default command with SSE transport
ENTRYPOINT ["npx", "@playwright/mcp@latest"]
CMD ["--port", "8931", "--host", "0.0.0.0"]
