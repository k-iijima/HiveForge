# v5 Hiveè¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

> Phase 0: è¨­è¨ˆæ¤œè¨¼ã®æˆæœç‰©

ä½œæˆæ—¥: 2026-02-01
ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: **Draft**

---

## 0. ç”¨èªä½“ç³»ï¼ˆèœ‚ã®ç”Ÿæ…‹ã«åŸºã¥ãï¼‰

### ç”¨èªãƒãƒƒãƒ”ãƒ³ã‚°

| ç”¨èª | è‹±èª | èª¬æ˜ |
|------|------|------|
| ğŸ  Hive | Hive | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®ç’°å¢ƒï¼ˆè¤‡æ•°Colonyã‚’å«ã‚€ï¼‰ |
| ğŸ Colony | Colony | å°‚é–€é ˜åŸŸã‚’æ‹…å½“ã™ã‚‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç¾¤ã‚Œ |
| ğŸ‘‘ Queen Bee | Queen Bee | Colonyã®èª¿åœã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼ˆ1ä½“/Colonyï¼‰ |
| ğŸ Worker Bee | Worker Bee | å®Ÿå‹™ã‚’æ‹…å½“ã™ã‚‹å€‹åˆ¥ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ |
| ğŸ§‘â€ğŸŒ¾ Beekeeper | Beekeeper | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨å¯¾è©±ã—ã€Hive/Colonyã‚’ç®¡ç† |
| ğŸ“‹ Run | Run | Colonyå†…ã®ä½œæ¥­å˜ä½ï¼ˆv4ã‹ã‚‰ç¶™ç¶šï¼‰ |
| âœ… Task | Task | Runå†…ã®å€‹åˆ¥ã‚¿ã‚¹ã‚¯ï¼ˆv4ã‹ã‚‰ç¶™ç¶šï¼‰ |

### èœ‚ã®ç”Ÿæ…‹ã¨ã®å¯¾å¿œ

| èœ‚ã®ç”Ÿæ…‹ | HiveForgeã§ã®å½¹å‰² |
|---------|------------------|
| Hiveï¼ˆå·£ç®±ï¼‰ | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã€‚1ã¤ã®ç›®æ¨™ã«å‘ã‹ã†ç’°å¢ƒ |
| Colonyï¼ˆç¾¤ã‚Œï¼‰ | å°‚é–€é ˜åŸŸã®ãƒãƒ¼ãƒ ã€‚UI/UXã€APIã€Dataãªã© |
| Queen Beeï¼ˆå¥³ç‹èœ‚ï¼‰ | Colonyã®çµ±æ‹¬ã€‚Worker Beeã«æŒ‡ç¤ºã‚’å‡ºã—ã€çµæœã‚’çµ±åˆ |
| Worker Beeï¼ˆåƒãèœ‚ï¼‰ | å®Ÿå‹™æ‹…å½“ã€‚ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã€èª¿æŸ»ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼ãªã© |
| Beekeeperï¼ˆé¤Šèœ‚å®¶ï¼‰ | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä»£ç†ã€‚å¿…è¦ã«å¿œã˜ã¦Hive/Colonyã‚’ä½œæˆãƒ»å»ƒæ­¢ |

---

## 1. ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£é–¢ä¿‚å›³ï¼ˆERå›³ï¼‰

### 1.1 æ¦‚å¿µãƒ¢ãƒ‡ãƒ«

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            Hive (å·£ç®±)                               â”‚
â”‚                     ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®ç’°å¢ƒ                            â”‚
â”‚  - hive_id: string (ULID)                                           â”‚
â”‚  - name: string (ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå)                                     â”‚
â”‚  - goal: string (ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç›®æ¨™)                                   â”‚
â”‚  - state: HiveState                                                 â”‚
â”‚  - beekeeper_config: BeekeeperConfig                                â”‚
â”‚  - created_at: datetime                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ 1:N
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Colony (ç¾¤ã‚Œ)                              â”‚
â”‚                      å°‚é–€é ˜åŸŸã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç¾¤                         â”‚
â”‚  - colony_id: string (ULID)                                         â”‚
â”‚  - hive_id: string (æ‰€å±Hive)                                       â”‚
â”‚  - name: string (ä¾‹: "UI/UX", "API", "Data")                        â”‚
â”‚  - domain: string (å°‚é–€é ˜åŸŸã®èª¬æ˜)                                   â”‚
â”‚  - state: ColonyState (idle/active/completed/failed/suspended)      â”‚
â”‚  - queen_config: QueenBeeConfig (Queen Beeã®è¨­å®š)                   â”‚
â”‚  - trust_level: TrustLevel (å§”ä»»ãƒ¬ãƒ™ãƒ«)                             â”‚
â”‚  - created_at: datetime                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ 1:1 (Queen) + 1:N (Workers)
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Queen Bee (å¥³ç‹èœ‚)                           â”‚
â”‚                       Colonyã®èª¿åœã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ                        â”‚
â”‚  - colony_id: string (æ‰€å±Colony)                                   â”‚
â”‚  - system_prompt: string (èª¿åœç”¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ)                          â”‚
â”‚  - context_summary: string (Colonyå…¨ä½“ã®çŠ¶æ³è¦ç´„)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ 1:N
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Worker Bee (åƒãèœ‚)                          â”‚
â”‚                        å®Ÿå‹™æ‹…å½“ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ                           â”‚
â”‚  - worker_id: string (ULID)                                         â”‚
â”‚  - colony_id: string (æ‰€å±Colony)                                   â”‚
â”‚  - role: string (å½¹å‰²: "designer", "developer", "reviewer"ç­‰)       â”‚
â”‚  - system_prompt: string (å°‚é–€å®¶ç”¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ)                        â”‚
â”‚  - rag_context: string (RAGã§å–å¾—ã—ãŸã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ)                   â”‚
â”‚  - tools_allowed: list[string] (ä½¿ç”¨å¯èƒ½ãªMCPãƒ„ãƒ¼ãƒ«)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ 1:N (Worker BeeãŒæ‹…å½“)
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                             Run (å®Ÿè¡Œ)                               â”‚
â”‚                    v4ã‹ã‚‰ç¶™ç¶š: ä½œæ¥­å˜ä½                               â”‚
â”‚  - run_id: string (ULID)                                            â”‚
â”‚  - colony_id: string (æ‰€å±Colony) â† v5ã§è¿½åŠ                         â”‚
â”‚  - goal: string                                                     â”‚
â”‚  - state: RunState (running/completed/failed/aborted)               â”‚
â”‚  - assigned_worker_id: string? (æ‹…å½“Worker Bee)                     â”‚
â”‚  - event_count: int                                                 â”‚
â”‚  - started_at: datetime                                             â”‚
â”‚  - completed_at: datetime?                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ 1:N
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            Task (ã‚¿ã‚¹ã‚¯)                             â”‚
â”‚                    v4ã‹ã‚‰ç¶™ç¶š: å€‹åˆ¥ä½œæ¥­                               â”‚
â”‚  - task_id: string (ULID)                                           â”‚
â”‚  - run_id: string (æ‰€å±Run)                                         â”‚
â”‚  - parent_task_id: string? â† v5ã§è¿½åŠ ï¼ˆã‚µãƒ–ã‚¿ã‚¹ã‚¯ï¼‰                  â”‚
â”‚  - title: string                                                    â”‚
â”‚  - state: TaskState                                                 â”‚
â”‚  - assignee: string? (æ‹…å½“Worker Bee)                               â”‚
â”‚  - progress: int (0-100)                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 é–¢ä¿‚æ€§ã¾ã¨ã‚

| è¦ª | å­ | é–¢ä¿‚ | èª¬æ˜ |
|----|----|----|------|
| Hive | Colony | 1:N | 1ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ = è¤‡æ•°ã®å°‚é–€é ˜åŸŸ |
| Colony | Queen Bee | 1:1 | å„Colonyã«1ä½“ã®å¥³ç‹èœ‚ |
| Colony | Worker Bee | 1:N | å„Colonyã«è¤‡æ•°ã®åƒãèœ‚ |
| Colony | Run | 1:N | Colonyå†…ã§è¤‡æ•°RunãŒä¸¦è¡Œå¯èƒ½ |
| Run | Task | 1:N | v4ã¨åŒã˜ |
| Task | Task | 1:N | v5ã§è¿½åŠ : ã‚µãƒ–ã‚¿ã‚¹ã‚¯éšå±¤ |

### 1.3 Beekeeperã®ä½ç½®ã¥ã‘

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   ãƒ¦ãƒ¼ã‚¶ãƒ¼   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Beekeeper  â”‚  â† ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã®å¯¾è©±çª“å£
                    â”‚  (é¤Šèœ‚å®¶)    â”‚     Hive/Colonyã®ç®¡ç†
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â–¼               â–¼               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Hive A   â”‚  â”‚   Hive B   â”‚  â”‚   Hive C   â”‚
    â”‚ (Project1) â”‚  â”‚ (Project2) â”‚  â”‚ (Project3) â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Beekeeperã®è²¬å‹™**:
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®è¦æ±‚ã‚’å—ã‘å–ã‚Šã€é©åˆ‡ãªHive/Colonyã«æŒ¯ã‚Šåˆ†ã‘
- è¤‡æ•°Colonyã®Queen Beeã‹ã‚‰ã®å ±å‘Šã‚’çµ±åˆã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æç¤º
- å¿…è¦ã«å¿œã˜ã¦Hive/Colonyã®ä½œæˆãƒ»å»ƒæ­¢ï¼ˆå°†æ¥æ©Ÿèƒ½ï¼‰
- å§”ä»»ãƒ¬ãƒ™ãƒ«ã®ç®¡ç†

### 1.4 v4ã‹ã‚‰ã®å¤‰æ›´ç‚¹

| é …ç›® | v4 | v5 | ç ´å£Šçš„å¤‰æ›´ |
|------|----|----|----------|
| Run.colony_id | ãªã— | è¿½åŠ ï¼ˆoptionalï¼‰ | âŒ ãªã—ï¼ˆå¾Œæ–¹äº’æ›ï¼‰ |
| Task.parent_task_id | ãªã— | è¿½åŠ ï¼ˆoptionalï¼‰ | âŒ ãªã—ï¼ˆå¾Œæ–¹äº’æ›ï¼‰ |
| Hive | ãªã— | æ–°è¦ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ | âŒ ãªã—ï¼ˆè¿½åŠ ã®ã¿ï¼‰ |
| Colony | ãªã— | æ–°è¦ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ | âŒ ãªã—ï¼ˆè¿½åŠ ã®ã¿ï¼‰ |
| Queen Bee | ãªã— | æ–°è¦ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ | âŒ ãªã—ï¼ˆè¿½åŠ ã®ã¿ï¼‰ |
| Worker Bee | ãªã— | æ–°è¦ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ | âŒ ãªã—ï¼ˆè¿½åŠ ã®ã¿ï¼‰ |

---

## 2. ColonyçŠ¶æ…‹æ©Ÿæ¢°

### 2.1 çŠ¶æ…‹å®šç¾©

```python
class ColonyState(Enum):
    IDLE = "idle"           # ä½œæˆæ¸ˆã¿ã€ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªRunãªã—
    ACTIVE = "active"       # 1ã¤ä»¥ä¸Šã®RunãŒå®Ÿè¡Œä¸­
    COMPLETED = "completed" # å…¨RunãŒå®Œäº†
    FAILED = "failed"       # ç•°å¸¸çµ‚äº†
    SUSPENDED = "suspended" # ä¸€æ™‚åœæ­¢ä¸­
```

### 2.2 çŠ¶æ…‹é·ç§»å›³

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚             â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚    IDLE     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚           â”‚             â”‚           â”‚
        â”‚           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜           â”‚
        â”‚                  â”‚                  â”‚
        â”‚                  â”‚ run.started      â”‚
        â”‚                  â–¼                  â”‚
        â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
        â”‚           â”‚             â”‚           â”‚
  å…¨Runå®Œäº†         â”‚   ACTIVE    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ emergency.stop
  (è‡ªå‹•é·ç§»)        â”‚             â”‚           â”‚
        â”‚           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜           â”‚
        â”‚                  â”‚                  â”‚
        â”‚                  â”‚                  â”‚
        â–¼                  â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             â”‚    â”‚             â”‚    â”‚             â”‚
â”‚  COMPLETED  â”‚    â”‚  SUSPENDED  â”‚    â”‚   FAILED    â”‚
â”‚             â”‚    â”‚             â”‚    â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚ resume
                          â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚   ACTIVE    â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 é·ç§»ãƒ«ãƒ¼ãƒ«

| ç¾åœ¨çŠ¶æ…‹ | ã‚¤ãƒ™ãƒ³ãƒˆ | æ¬¡çŠ¶æ…‹ | æ¡ä»¶ |
|---------|---------|--------|------|
| IDLE | run.started | ACTIVE | Colonyå†…ã§RunãŒé–‹å§‹ |
| ACTIVE | run.completed | ACTIVE | ä»–ã«å®Ÿè¡Œä¸­Runã‚ã‚Š |
| ACTIVE | run.completed | IDLE | å…¨Runå®Œäº†ã€auto_complete=false |
| ACTIVE | run.completed | COMPLETED | å…¨Runå®Œäº†ã€auto_complete=true |
| ACTIVE | emergency.stop | FAILED | ç·Šæ€¥åœæ­¢ |
| ACTIVE | suspend | SUSPENDED | ä¸€æ™‚åœæ­¢è¦æ±‚ |
| SUSPENDED | resume | ACTIVE | å†é–‹è¦æ±‚ |

---

## 3. ã‚¤ãƒ™ãƒ³ãƒˆå‹ä¸€è¦§

### 3.1 æ–°è¦ã‚¤ãƒ™ãƒ³ãƒˆå‹ï¼ˆv5è¿½åŠ ï¼‰

```python
class EventType(Enum):
    # ... v4ã®æ—¢å­˜ã‚¤ãƒ™ãƒ³ãƒˆ ...
    
    # Hiveé–¢é€£ï¼ˆv5è¿½åŠ ï¼‰
    HIVE_CREATED = "hive.created"
    HIVE_CLOSED = "hive.closed"
    
    # Colonyé–¢é€£ï¼ˆv5è¿½åŠ ï¼‰
    COLONY_CREATED = "colony.created"
    COLONY_ACTIVATED = "colony.activated"
    COLONY_COMPLETED = "colony.completed"
    COLONY_FAILED = "colony.failed"
    COLONY_SUSPENDED = "colony.suspended"
    COLONY_RESUMED = "colony.resumed"
    
    # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“é€šä¿¡ï¼ˆv5è¿½åŠ ï¼‰
    OPINION_REQUESTED = "agent.opinion_requested"
    OPINION_RESPONDED = "agent.opinion_responded"
    
    # Worker Beeé–¢é€£ï¼ˆv5è¿½åŠ ï¼‰
    WORKER_ASSIGNED = "worker.assigned"
    WORKER_RELEASED = "worker.released"
```

### 3.2 ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ã‚­ãƒ¼ãƒ

```python
class HiveCreatedEvent(BaseEvent):
    """Hiveä½œæˆã‚¤ãƒ™ãƒ³ãƒˆ"""
    type: Literal[EventType.HIVE_CREATED] = EventType.HIVE_CREATED
    hive_id: str
    # payload: { name, goal, beekeeper_config }

class ColonyCreatedEvent(BaseEvent):
    """Colonyä½œæˆã‚¤ãƒ™ãƒ³ãƒˆ"""
    type: Literal[EventType.COLONY_CREATED] = EventType.COLONY_CREATED
    hive_id: str
    colony_id: str
    # payload: { name, domain, queen_config }

class ColonyActivatedEvent(BaseEvent):
    """Colonyã‚¢ã‚¯ãƒ†ã‚£ãƒ–åŒ–ã‚¤ãƒ™ãƒ³ãƒˆ"""
    type: Literal[EventType.COLONY_ACTIVATED] = EventType.COLONY_ACTIVATED
    colony_id: str
    # payload: { trigger_run_id }

class OpinionRequestedEvent(BaseEvent):
    """æ„è¦‹è¦æ±‚ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆBeekeeper â†’ Queen Beeï¼‰"""
    type: Literal[EventType.OPINION_REQUESTED] = EventType.OPINION_REQUESTED
    colony_id: str  # å®›å…ˆColony
    # payload: { context, question, priority, deadline }

class OpinionRespondedEvent(BaseEvent):
    """æ„è¦‹å›ç­”ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆQueen Bee â†’ Beekeeperï¼‰"""
    type: Literal[EventType.OPINION_RESPONDED] = EventType.OPINION_RESPONDED
    colony_id: str  # é€ä¿¡å…ƒColony
    # payload: { request_id, summary, details, questions, confidence }

class WorkerAssignedEvent(BaseEvent):
    """Worker Beeå‰²ã‚Šå½“ã¦ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆQueen Bee â†’ Worker Beeï¼‰"""
    type: Literal[EventType.WORKER_ASSIGNED] = EventType.WORKER_ASSIGNED
    colony_id: str
    worker_id: str
    run_id: str
    # payload: { role, instruction }
```

### 3.3 æ—¢å­˜ã‚¤ãƒ™ãƒ³ãƒˆã®æ‹¡å¼µ

```python
# RunStartedEvent - colony_idã‚’payloadã«è¿½åŠ ï¼ˆoptionalï¼‰
class RunStartedEvent(BaseEvent):
    # payload: { goal, colony_id? }  # v5ã§colony_idã‚’è¿½åŠ 

# TaskCreatedEvent - parent_task_idã‚’payloadã«è¿½åŠ ï¼ˆoptionalï¼‰
class TaskCreatedEvent(BaseEvent):
    # payload: { title, parent_task_id? }  # v5ã§parent_task_idã‚’è¿½åŠ 
```

---

## 4. Akashic Record (AR) ã¸ã®å½±éŸ¿

### 4.1 ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
Vault/
â”œâ”€â”€ hives/                       # Hiveåˆ¥ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆv5è¿½åŠ ï¼‰
â”‚   â””â”€â”€ {hive_id}/
â”‚       â”œâ”€â”€ hive.json            # Hiveè¨­å®š
â”‚       â””â”€â”€ colonies/            # Colonyåˆ¥ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
â”‚           â””â”€â”€ {colony_id}/
â”‚               â”œâ”€â”€ colony.json  # Colonyè¨­å®šï¼ˆQueen Beeå«ã‚€ï¼‰
â”‚               â”œâ”€â”€ workers/     # Worker Beeè¨­å®š
â”‚               â”‚   â””â”€â”€ {worker_id}.json
â”‚               â””â”€â”€ runs/        # Colonyé…ä¸‹ã®Run
â”‚                   â””â”€â”€ {run_id}/
â”‚                       â””â”€â”€ events.jsonl
â””â”€â”€ {run_id}/                    # v4äº’æ›: Colonyæœªæ‰€å±ã®Run
    â””â”€â”€ events.jsonl
```

### 4.2 å¾Œæ–¹äº’æ›æ€§

- **Colonyæœªæ‰€å±ã®Run**: v4ã®Runã¯ãã®ã¾ã¾å‹•ä½œï¼ˆ`colony_id`ãªã—ï¼‰
- **æ®µéšçš„ç§»è¡Œ**: æ—¢å­˜Runã‚’å¾Œã‹ã‚‰Colonyã«æ‰€å±ã•ã›ã‚‹ã“ã¨ã‚‚å¯èƒ½
- **ARãƒªãƒ—ãƒ¬ã‚¤**: `colony_id`ãŒãªã„ã‚¤ãƒ™ãƒ³ãƒˆã¯ã‚°ãƒ­ãƒ¼ãƒãƒ«Runã¨ã—ã¦æ‰±ã†

---

## 5. APIæ‹¡å¼µ

### 5.1 æ–°è¦ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

```
# Hiveæ“ä½œ
POST   /hives                         # Hiveä½œæˆ
GET    /hives                         # Hiveä¸€è¦§
GET    /hives/{hive_id}               # Hiveè©³ç´°
DELETE /hives/{hive_id}               # Hiveå‰Šé™¤ï¼ˆå…¨Colonyå®Œäº†æ™‚ã®ã¿ï¼‰

# Colonyæ“ä½œ
POST   /hives/{hive_id}/colonies      # Colonyä½œæˆ
GET    /hives/{hive_id}/colonies      # Colonyä¸€è¦§
GET    /colonies/{colony_id}          # Colonyè©³ç´°
POST   /colonies/{colony_id}/suspend  # ä¸€æ™‚åœæ­¢
POST   /colonies/{colony_id}/resume   # å†é–‹

# Colonyé…ä¸‹ã®Runæ“ä½œ
POST   /colonies/{colony_id}/runs     # Colonyå†…ã§Runé–‹å§‹
GET    /colonies/{colony_id}/runs     # Colonyå†…ã®Runä¸€è¦§

# ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“é€šä¿¡
POST   /colonies/{colony_id}/opinions          # æ„è¦‹è¦æ±‚é€ä¿¡
GET    /colonies/{colony_id}/opinions          # æ„è¦‹è¦æ±‚ä¸€è¦§
POST   /colonies/{colony_id}/opinions/{id}/respond  # æ„è¦‹å›ç­”

# Worker Beeæ“ä½œ
GET    /colonies/{colony_id}/workers  # Worker Beeä¸€è¦§
POST   /colonies/{colony_id}/workers  # Worker Beeè¿½åŠ 
```

### 5.2 æ—¢å­˜ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¸ã®å½±éŸ¿

```
# å¤‰æ›´ãªã—ï¼ˆå¾Œæ–¹äº’æ›ï¼‰
POST /runs                # colony_idã¯optionalãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦è¿½åŠ 
GET  /runs                # colony_idã§ãƒ•ã‚£ãƒ«ã‚¿å¯èƒ½
GET  /runs/{run_id}       # å¤‰æ›´ãªã—
```

---

## 6. MCPãƒ„ãƒ¼ãƒ«æ‹¡å¼µ

### 6.1 æ–°è¦ãƒ„ãƒ¼ãƒ«

```python
# Colonyæ“ä½œ
create_colony(hive_id: str, name: str, domain: str) -> ColonyInfo
list_colonies(hive_id: str) -> list[ColonyInfo]
get_colony_status(colony_id: str) -> ColonyStatus

# Colonyå†…ã§ã®Runæ“ä½œ
start_colony_run(colony_id: str, goal: str) -> RunInfo

# ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“é€šä¿¡
request_opinion(colony_id: str, question: str, priority: str) -> OpinionRequestId
respond_opinion(request_id: str, opinion: str, confidence: float) -> None
get_pending_opinions(colony_id: str) -> list[OpinionRequest]

# Worker Beeæ“ä½œ
assign_worker(colony_id: str, run_id: str, role: str) -> WorkerId
release_worker(worker_id: str) -> None
```

### 6.2 æ—¢å­˜ãƒ„ãƒ¼ãƒ«ã¸ã®å½±éŸ¿

```python
# start_run - colony_idã‚’optionalãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦è¿½åŠ 
start_run(goal: str, colony_id: str | None = None) -> RunInfo

# create_task - parent_task_idã‚’optionalãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦è¿½åŠ 
create_task(title: str, parent_task_id: str | None = None) -> TaskInfo
```

---

## 7. VS Codeæ‹¡å¼µã¸ã®å½±éŸ¿

### 7.1 æ–°è¦View

```
HiveForge Panel (ã‚µã‚¤ãƒ‰ãƒãƒ¼)
â”œâ”€â”€ ğŸ  Hive Overview          # Hiveå…¨ä½“æ¦‚è¦ï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼‰
â”œâ”€â”€ ğŸ Colonies               # Colonyä¸€è¦§
â”‚   â”œâ”€â”€ ğŸ“¦ UI/UX Colony (active)
â”‚   â”‚   â”œâ”€â”€ â–¶ï¸ Run: ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢è¨­è¨ˆ
â”‚   â”‚   â””â”€â”€ â–¶ï¸ Run: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¨­è¨ˆ
â”‚   â”œâ”€â”€ ğŸ“¦ API Colony (idle)
â”‚   â””â”€â”€ ğŸ“¦ Data Colony (active)
â”œâ”€â”€ ğŸ“‹ Tasks                  # ç¾åœ¨ã®Colony/Runã®ã‚¿ã‚¹ã‚¯
â”œâ”€â”€ â“ Requirements           # ç¢ºèªè¦è«‹
â”œâ”€â”€ ğŸ“œ Events                 # ã‚¤ãƒ™ãƒ³ãƒˆãƒ­ã‚°
â””â”€â”€ ğŸ¯ Decisions              # æ±ºå®šå±¥æ­´
```

### 7.2 Conference Viewï¼ˆPhase 2ã§å®Ÿè£…ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ Conference: ECã‚µã‚¤ãƒˆé–‹ç™º                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Beekeeper] ECã‚µã‚¤ãƒˆã®åŸºæœ¬è¨­è¨ˆã‚’å§‹ã‚ã¾ã™ã€‚å„Colonyã«æ„è¦‹...â”‚
â”‚                                                            â”‚
â”‚ [UI/UX Queen] ãƒ¢ãƒã‚¤ãƒ«ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã§é€²ã‚ã¾ã™ã‹ï¼Ÿ             â”‚
â”‚         å€™è£œ: A) ãƒ¢ãƒã‚¤ãƒ«å„ªå…ˆ B) ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—å„ªå…ˆ          â”‚
â”‚                                                            â”‚
â”‚ [API Queen] æ±ºæ¸ˆã‚µãƒ¼ãƒ“ã‚¹ã¯Stripe/PayPay/è‡ªå‰ã®ã©ã‚Œã‚’ï¼Ÿ     â”‚
â”‚                                                            â”‚
â”‚ [Data Queen] å•†å“ã‚¹ã‚­ãƒ¼ãƒæ¡ˆã‚’ä½œæˆã—ã¾ã—ãŸã€‚[è©³ç´°ã‚’è¦‹ã‚‹]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [å…¥åŠ›æ¬„] _________________________________ [é€ä¿¡] [ğŸ¤]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³

### 8.1 å˜ä¸€Colonyå‹•ä½œãƒ•ãƒ­ãƒ¼ï¼ˆPhase 1ï¼‰

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼           MCP/API          Colony            AR
   â”‚                 â”‚                â”‚              â”‚
   â”‚ create_colony   â”‚                â”‚              â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                â”‚              â”‚
   â”‚                 â”‚ ColonyCreated  â”‚              â”‚
   â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
   â”‚                 â”‚                â”‚              â”‚
   â”‚ start_run       â”‚                â”‚              â”‚
   â”‚ (colony_id)     â”‚                â”‚              â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                â”‚              â”‚
   â”‚                 â”‚ RunStarted     â”‚              â”‚
   â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
   â”‚                 â”‚ ColonyActivatedâ”‚              â”‚
   â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
   â”‚                 â”‚                â”‚              â”‚
   â”‚ create_task     â”‚                â”‚              â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ TaskCreated    â”‚              â”‚
   â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
   â”‚                 â”‚                â”‚              â”‚
   â”‚ complete_task   â”‚                â”‚              â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ TaskCompleted  â”‚              â”‚
   â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
   â”‚                 â”‚                â”‚              â”‚
   â”‚ complete_run    â”‚                â”‚              â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ RunCompleted   â”‚              â”‚
   â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
   â”‚                 â”‚                â”‚              â”‚
   â”‚                 â”‚ (å…¨Runå®Œäº†)     â”‚              â”‚
   â”‚                 â”‚ ColonyCompletedâ”‚              â”‚
   â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
```

### 8.2 ãƒãƒ«ãƒColonyå”èª¿ãƒ•ãƒ­ãƒ¼ï¼ˆPhase 2ï¼‰

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼    Beekeeper   UI Queen    API Queen   Data Queen
   â”‚         â”‚            â”‚           â”‚           â”‚
   â”‚ "ECã‚µã‚¤ãƒˆä½œã‚ŠãŸã„"   â”‚           â”‚           â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚           â”‚           â”‚
   â”‚         â”‚            â”‚           â”‚           â”‚
   â”‚         â”‚ OpinionRequest (ä¸¦åˆ—é€ä¿¡)          â”‚
   â”‚         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚           â”‚           â”‚
   â”‚         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚          â”‚
   â”‚         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
   â”‚         â”‚            â”‚           â”‚           â”‚
   â”‚         â”‚            â”‚ [Workeré”ã«ç›¸è«‡]      â”‚
   â”‚         â”‚            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
   â”‚         â”‚            â”‚           â”‚           â”‚
   â”‚         â”‚ OpinionResponse (ä¸¦åˆ—è¿”ä¿¡)         â”‚
   â”‚         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚           â”‚           â”‚
   â”‚         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚           â”‚
   â”‚         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
   â”‚         â”‚            â”‚           â”‚           â”‚
   â”‚         â”‚ [æ„è¦‹ã‚’çµ±åˆ]â”‚           â”‚           â”‚
   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”‚            â”‚           â”‚           â”‚
   â”‚ "ç¢ºèªäº‹é …3ã¤ã‚ã‚Šã¾ã™"â”‚           â”‚           â”‚
   â”‚         â”‚            â”‚           â”‚           â”‚
   â”‚ "ãƒ¢ãƒã‚¤ãƒ«å„ªå…ˆã€Stripeã€åœ¨åº«ãªã—"             â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚           â”‚           â”‚
   â”‚         â”‚ [å„Colonyã«ä¼é”]       â”‚           â”‚
   â”‚         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
```

---

## 9. æ—¢å­˜ãƒ†ã‚¹ãƒˆã¸ã®å½±éŸ¿

### 9.1 å½±éŸ¿ãªã—ï¼ˆå¾Œæ–¹äº’æ›ï¼‰

- `tests/test_ar.py` - colony_idãªã—ã®Runã¯å¾“æ¥é€šã‚Šå‹•ä½œ
- `tests/test_events.py` - æ—¢å­˜ã‚¤ãƒ™ãƒ³ãƒˆå‹ã¯å¤‰æ›´ãªã—
- `tests/test_state_machines.py` - Run/TaskçŠ¶æ…‹æ©Ÿæ¢°ã¯å¤‰æ›´ãªã—
- `tests/test_api.py` - æ—¢å­˜ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯å¤‰æ›´ãªã—
- `tests/test_mcp_server.py` - æ—¢å­˜ãƒ„ãƒ¼ãƒ«ã¯å¤‰æ›´ãªã—

### 9.2 æ–°è¦ãƒ†ã‚¹ãƒˆï¼ˆè¿½åŠ ï¼‰

- `tests/test_colony.py` - ColonyçŠ¶æ…‹æ©Ÿæ¢°
- `tests/test_colony_events.py` - Colonyã‚¤ãƒ™ãƒ³ãƒˆå‹
- `tests/test_colony_api.py` - Colony API
- `tests/test_colony_mcp.py` - Colony MCPãƒ„ãƒ¼ãƒ«

---

## 10. Phase 1 å®Ÿè£…ã‚¿ã‚¹ã‚¯

### 10.1 Python (Core/API/MCP)

- [ ] `src/hiveforge/core/hive.py` - Hive/Colonyãƒ¢ãƒ‡ãƒ«ãƒ»çŠ¶æ…‹æ©Ÿæ¢°
- [ ] `src/hiveforge/core/events.py` - Hive/Colonyã‚¤ãƒ™ãƒ³ãƒˆå‹è¿½åŠ 
- [ ] `src/hiveforge/core/ar/colony_projections.py` - ColonyæŠ•å½±
- [ ] `src/hiveforge/api/routes/colonies.py` - Colony APIãƒ«ãƒ¼ãƒˆ
- [ ] `src/hiveforge/mcp_server/handlers/colony.py` - Colony MCPãƒãƒ³ãƒ‰ãƒ©
- [ ] `tests/test_colony.py` - Colonyãƒ†ã‚¹ãƒˆ

### 10.2 VS Codeæ‹¡å¼µ

- [ ] `src/providers/coloniesProvider.ts` - Colony TreeView
- [ ] `src/commands/colonyCommands.ts` - Colonyã‚³ãƒãƒ³ãƒ‰
- [ ] `package.json` - Colony Viewè¿½åŠ 

### 10.3 ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [ ] `docs/ARCHITECTURE.md` - Hive/Colonyæ¦‚å¿µè¿½åŠ 
- [ ] `docs/QUICKSTART.md` - Colonyæ“ä½œæ‰‹é †è¿½åŠ 

---

## 11. æ±ºå®šäº‹é …ãƒ­ã‚°

| æ—¥ä»˜ | æ±ºå®š | ç†ç”± |
|------|------|------|
| 2026-02-01 | Run.colony_idã¯optional | v4å¾Œæ–¹äº’æ›æ€§ã®ãŸã‚ |
| 2026-02-01 | Colonyé…ä¸‹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã‚’è¿½åŠ  | Colonyå˜ä½ã§ã®ARç®¡ç†ã®ãŸã‚ |
| 2026-02-01 | Phase 1ã§ã¯å˜ä¸€Colonyã®ã¿ | è¤‡é›‘æ€§ã‚’æ®µéšçš„ã«å°å…¥ |

---

## 12. æœªæ±ºå®šäº‹é …

| é …ç›® | é¸æŠè‚¢ | æ±ºå®šäºˆå®š |
|------|--------|---------|
| Hiveã®æ°¸ç¶šåŒ–å½¢å¼ | A: JSON B: YAML C: ARã‚¤ãƒ™ãƒ³ãƒˆ | Phase 1é–‹å§‹å‰ |
| è¤‡æ•°Colonyé–“ã®å„ªå…ˆåº¦åˆ¶å¾¡ | A: é™çš„è¨­å®š B: å‹•çš„èª¿æ•´ | Phase 2é–‹å§‹å‰ |
| Worker Beeã®å®Ÿè£…æ–¹æ³• | A: å€‹åˆ¥ãƒ—ãƒ­ã‚»ã‚¹ B: ã‚¹ãƒ¬ãƒƒãƒ‰ C: å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ | Phase 2é–‹å§‹å‰ |
