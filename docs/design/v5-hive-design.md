# v5 Hiveè¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

> Phase 0: è¨­è¨ˆæ¤œè¨¼ã®æˆæœç‰©

ä½œæˆæ—¥: 2026-02-01
ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: **Reviewed** (ãƒ¬ãƒ“ãƒ¥ãƒ¼å®Œäº†ãƒ»Phase 1ç€æ‰‹å¯èƒ½)
ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯å¯¾å¿œ: 2026-02-01 (Decision Protocol, Project Contract, Action Class, Conflict Detection è¿½åŠ )

---

## 0. ç”¨èªä½“ç³»ï¼ˆèœ‚ã®ç”Ÿæ…‹ã«åŸºã¥ãï¼‰

### ç”¨èªãƒãƒƒãƒ”ãƒ³ã‚°

| ç”¨èª | è‹±èª | èª¬æ˜ |
|------|------|------|
| ğŸ  Hive | Hive | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®ç’°å¢ƒï¼ˆè¤‡æ•°Colonyã‚’å«ã‚€ï¼‰ |
| ğŸ Colony | Colony | å°‚é–€é ˜åŸŸã‚’æ‹…å½“ã™ã‚‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç¾¤ã‚Œ |
| ğŸ‘‘ Queen Bee | Queen Bee | Colonyã®èª¿åœã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼ˆ1ä½“/Colonyï¼‰ |
| ğŸ Worker Bee | Worker Bee | å®Ÿå‹™ã‚’æ‹…å½“ã™ã‚‹å€‹åˆ¥ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ |
| ğŸ§‘â€ğŸŒ¾ Beekeeper | Beekeeper | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨å¯¾è©±ã—ã€Hive/Colonyã‚’ç®¡ç† |
| ğŸ“‹ Run | Run | Colonyå†…ã®ä½œæ¥­å˜ä½ï¼ˆv4ã‹ã‚‰ç¶™ç¶šï¼‰ |
| âœ… Task | Task | Runå†…ã®å€‹åˆ¥ã‚¿ã‚¹ã‚¯ï¼ˆv4ã‹ã‚‰ç¶™ç¶šï¼‰ |

### èœ‚ã®ç”Ÿæ…‹ã¨ã®å¯¾å¿œ

| èœ‚ã®ç”Ÿæ…‹ | HiveForgeã§ã®å½¹å‰² |
|---------|------------------|
| Hiveï¼ˆå·£ç®±ï¼‰ | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã€‚1ã¤ã®ç›®æ¨™ã«å‘ã‹ã†ç’°å¢ƒ |
| Colonyï¼ˆç¾¤ã‚Œï¼‰ | å°‚é–€é ˜åŸŸã®ãƒãƒ¼ãƒ ã€‚UI/UXã€APIã€Dataãªã© |
| Queen Beeï¼ˆå¥³ç‹èœ‚ï¼‰ | Colonyã®çµ±æ‹¬ã€‚Worker Beeã«æŒ‡ç¤ºã‚’å‡ºã—ã€çµæœã‚’çµ±åˆ |
| Worker Beeï¼ˆåƒãèœ‚ï¼‰ | å®Ÿå‹™æ‹…å½“ã€‚ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã€èª¿æŸ»ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼ãªã© |
| Beekeeperï¼ˆé¤Šèœ‚å®¶ï¼‰ | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä»£ç†ã€‚å¿…è¦ã«å¿œã˜ã¦Hive/Colonyã‚’ä½œæˆãƒ»å»ƒæ­¢ |

### ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ¨©é™ãƒ¢ãƒ‡ãƒ«

ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆé–‹ç™ºè€…ï¼‰ã¯ **BeekeeperçµŒç”±ã§ã®é€šå¸¸æ“ä½œ** ã«åŠ ãˆã¦ã€**ç›´æ¥ä»‹å…¥æ¨©é™** ã‚’æŒã¤ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆé–‹ç™ºè€…ï¼‰                         â”‚
â”‚                                                                 â”‚
â”‚  æ¨©é™:                                                          â”‚
â”‚  - ğŸ”µ é€šå¸¸æ“ä½œ: BeekeeperçµŒç”±ã§æŒ‡ç¤ºãƒ»ç¢ºèª                        â”‚
â”‚  - ğŸ”´ ç›´æ¥ä»‹å…¥: Queen Beeã¨ç›´æ¥å¯¾è©±ï¼ˆBeekeeperã‚’ãƒã‚¤ãƒ‘ã‚¹ï¼‰        â”‚
â”‚  - ğŸ”´ ç›£æŸ»æ¨©é™: å…¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®æ´»å‹•ãƒ­ã‚°ã‚’é–²è¦§                    â”‚
â”‚  - ğŸ”´ è¨­å®šå¤‰æ›´: Beekeeper/Queen Bee/Worker Beeã®è¨­å®šã‚’å¤‰æ›´       â”‚
â”‚  - ğŸ”´ ç·Šæ€¥åœæ­¢: ä»»æ„ã®Colony/Runã‚’å³åº§ã«åœæ­¢                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                    â”‚
         â”‚ é€šå¸¸æ“ä½œ                            â”‚ ç›´æ¥ä»‹å…¥
         â–¼                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Beekeeper     â”‚â—„â”€â”€â”€ ç›´è¨´ â”€â”€â”€â”€â”€â”€â”€â”‚   Queen Bee     â”‚
â”‚   (é¤Šèœ‚å®¶)       â”‚                  â”‚   (å¥³ç‹èœ‚)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç›´æ¥ä»‹å…¥ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹

| ã‚±ãƒ¼ã‚¹ | èª¬æ˜ | æ“ä½œ |
|--------|------|------|
| Beekeeperã®èª¤è§£ | BeekeeperãŒãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ„å›³ã‚’æ­£ã—ãä¼ãˆã¦ã„ãªã„ | Queen Beeã«ç›´æ¥æŒ‡ç¤º |
| è©³ç´°ç¢ºèª | Queen Beeã®åˆ¤æ–­ç†ç”±ã‚’ç›´æ¥èããŸã„ | Queen Beeã¨ã®å¯¾è©± |
| ç·Šæ€¥å¯¾å¿œ | Beekeeperã®å¿œç­”ãŒé…ã„/ãƒ•ãƒªãƒ¼ã‚ºã—ãŸ | ç›´æ¥ä»‹å…¥ã§ä½œæ¥­ç¶™ç¶š |
| è¨­å®šèª¿æ•´ | Queen Beeã®ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’èª¿æ•´ | è¨­å®šå¤‰æ›´ |

### Queen Beeã‹ã‚‰ã®ç›´è¨´ï¼ˆEscalationï¼‰

Queen BeeãŒBeekeeperã®å‹•ä½œã«å•é¡Œã‚’æ„Ÿã˜ãŸå ´åˆã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ç›´æ¥å ±å‘Šã§ãã‚‹ã€‚

```python
class EscalationType(Enum):
    BEEKEEPER_CONFUSION = "beekeeper_confusion"   # BeekeeperãŒæ··ä¹±ã—ã¦ã„ã‚‹
    BEEKEEPER_TIMEOUT = "beekeeper_timeout"       # BeekeeperãŒå¿œç­”ã—ãªã„
    CONTEXT_LOSS = "context_loss"                 # ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãŒå¤±ã‚ã‚ŒãŸ
    INSTRUCTION_CONFLICT = "instruction_conflict" # æŒ‡ç¤ºãŒçŸ›ç›¾ã—ã¦ã„ã‚‹
    RESOURCE_CONCERN = "resource_concern"         # ãƒªã‚½ãƒ¼ã‚¹ï¼ˆã‚³ã‚¹ãƒˆ/æ™‚é–“ï¼‰ã®æ‡¸å¿µ
```

**ç›´è¨´ã®æµã‚Œ**:
1. Queen BeeãŒå•é¡Œã‚’æ¤œçŸ¥
2. `EscalationEvent`ã‚’ç™ºè¡Œï¼ˆARã«è¨˜éŒ²ï¼‰
3. VS Codeæ‹¡å¼µã«é€šçŸ¥ï¼ˆâš ï¸ã‚¢ã‚¤ã‚³ãƒ³ + ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ï¼‰
4. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç¢ºèªãƒ»å¯¾å¿œã‚’é¸æŠ
5. å¯¾å¿œçµæœã‚’Beekeeperã®æ”¹å–„ã«åæ˜ 

---

## 1. ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£é–¢ä¿‚å›³ï¼ˆERå›³ï¼‰

### 1.1 æ¦‚å¿µãƒ¢ãƒ‡ãƒ«

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            Hive (å·£ç®±)                               â”‚
â”‚                     ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®ç’°å¢ƒ                            â”‚
â”‚  - hive_id: string (ULID)                                           â”‚
â”‚  - name: string (ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå)                                     â”‚
â”‚  - goal: string (ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç›®æ¨™)                                   â”‚
â”‚  - state: HiveState                                                 â”‚
â”‚  - beekeeper_config: BeekeeperConfig                                â”‚
â”‚  - created_at: datetime                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ 1:N
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Colony (ç¾¤ã‚Œ)                              â”‚
â”‚                      å°‚é–€é ˜åŸŸã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç¾¤                         â”‚
â”‚  - colony_id: string (ULID)                                         â”‚
â”‚  - hive_id: string (æ‰€å±Hive)                                       â”‚
â”‚  - name: string (ä¾‹: "UI/UX", "API", "Data")                        â”‚
â”‚  - domain: string (å°‚é–€é ˜åŸŸã®èª¬æ˜)                                   â”‚
â”‚  - state: ColonyState (idle/active/completed/failed/suspended)      â”‚
â”‚  - queen_config: QueenBeeConfig (Queen Beeã®è¨­å®š)                   â”‚
â”‚  - trust_level: TrustLevel (å§”ä»»ãƒ¬ãƒ™ãƒ«)                             â”‚
â”‚  - created_at: datetime                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ 1:1 (Queen) + 1:N (Workers)
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Queen Bee (å¥³ç‹èœ‚)                           â”‚
â”‚                       Colonyã®èª¿åœã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ                        â”‚
â”‚  - colony_id: string (æ‰€å±Colony)                                   â”‚
â”‚  - system_prompt: string (èª¿åœç”¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ)                          â”‚
â”‚  - context_summary: string (Colonyå…¨ä½“ã®çŠ¶æ³è¦ç´„)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ 1:N
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Worker Bee (åƒãèœ‚)                          â”‚
â”‚                        å®Ÿå‹™æ‹…å½“ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ                           â”‚
â”‚  - worker_id: string (ULID)                                         â”‚
â”‚  - colony_id: string (æ‰€å±Colony)                                   â”‚
â”‚  - role: string (å½¹å‰²: "designer", "developer", "reviewer"ç­‰)       â”‚
â”‚  - system_prompt: string (å°‚é–€å®¶ç”¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ)                        â”‚
â”‚  - rag_context: string (RAGã§å–å¾—ã—ãŸã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ)                   â”‚
â”‚  - tools_allowed: list[string] (ä½¿ç”¨å¯èƒ½ãªMCPãƒ„ãƒ¼ãƒ«)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ 1:N (Worker BeeãŒæ‹…å½“)
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                             Run (å®Ÿè¡Œ)                               â”‚
â”‚                    v4ã‹ã‚‰ç¶™ç¶š: ä½œæ¥­å˜ä½                               â”‚
â”‚  - run_id: string (ULID)                                            â”‚
â”‚  - colony_id: string (æ‰€å±Colony) â† v5ã§è¿½åŠ                         â”‚
â”‚  - goal: string                                                     â”‚
â”‚  - state: RunState (running/completed/failed/aborted)               â”‚
â”‚  - assigned_worker_id: string? (æ‹…å½“Worker Bee)                     â”‚
â”‚  - event_count: int                                                 â”‚
â”‚  - started_at: datetime                                             â”‚
â”‚  - completed_at: datetime?                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ 1:N
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            Task (ã‚¿ã‚¹ã‚¯)                             â”‚
â”‚                    v4ã‹ã‚‰ç¶™ç¶š: å€‹åˆ¥ä½œæ¥­                               â”‚
â”‚  - task_id: string (ULID)                                           â”‚
â”‚  - run_id: string (æ‰€å±Run)                                         â”‚
â”‚  - parent_task_id: string? â† v5ã§è¿½åŠ ï¼ˆã‚µãƒ–ã‚¿ã‚¹ã‚¯ï¼‰                  â”‚
â”‚  - title: string                                                    â”‚
â”‚  - state: TaskState                                                 â”‚
â”‚  - assignee: string? (æ‹…å½“Worker Bee)                               â”‚
â”‚  - progress: int (0-100)                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 é–¢ä¿‚æ€§ã¾ã¨ã‚

| è¦ª | å­ | é–¢ä¿‚ | èª¬æ˜ |
|----|----|----|------|
| Hive | Colony | 1:N | 1ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ = è¤‡æ•°ã®å°‚é–€é ˜åŸŸ |
| Colony | Queen Bee | 1:1 | å„Colonyã«1ä½“ã®å¥³ç‹èœ‚ |
| Colony | Worker Bee | 1:N | å„Colonyã«è¤‡æ•°ã®åƒãèœ‚ |
| Colony | Run | 1:N | Colonyå†…ã§è¤‡æ•°RunãŒä¸¦è¡Œå¯èƒ½ |
| Run | Task | 1:N | v4ã¨åŒã˜ |
| Task | Task | 1:N | v5ã§è¿½åŠ : ã‚µãƒ–ã‚¿ã‚¹ã‚¯éšå±¤ |

### 1.3 Beekeeperã®ä½ç½®ã¥ã‘

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   ãƒ¦ãƒ¼ã‚¶ãƒ¼   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Beekeeper  â”‚  â† ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã®å¯¾è©±çª“å£
                    â”‚  (é¤Šèœ‚å®¶)    â”‚     Hive/Colonyã®ç®¡ç†
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â–¼               â–¼               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Hive A   â”‚  â”‚   Hive B   â”‚  â”‚   Hive C   â”‚
    â”‚ (Project1) â”‚  â”‚ (Project2) â”‚  â”‚ (Project3) â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Beekeeperã®è²¬å‹™**:
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®è¦æ±‚ã‚’å—ã‘å–ã‚Šã€é©åˆ‡ãªHive/Colonyã«æŒ¯ã‚Šåˆ†ã‘
- è¤‡æ•°Colonyã®Queen Beeã‹ã‚‰ã®å ±å‘Šã‚’çµ±åˆã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æç¤º
- å¿…è¦ã«å¿œã˜ã¦Hive/Colonyã®ä½œæˆãƒ»å»ƒæ­¢ï¼ˆå°†æ¥æ©Ÿèƒ½ï¼‰
- å§”ä»»ãƒ¬ãƒ™ãƒ«ã®ç®¡ç†

### 1.4 v4ã‹ã‚‰ã®å¤‰æ›´ç‚¹

| é …ç›® | v4 | v5 | ç ´å£Šçš„å¤‰æ›´ |
|------|----|----|----------|
| Run.colony_id | ãªã— | è¿½åŠ ï¼ˆoptionalï¼‰ | âŒ ãªã—ï¼ˆå¾Œæ–¹äº’æ›ï¼‰ |
| Task.parent_task_id | ãªã— | è¿½åŠ ï¼ˆoptionalï¼‰ | âŒ ãªã—ï¼ˆå¾Œæ–¹äº’æ›ï¼‰ |
| Hive | ãªã— | æ–°è¦ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ | âŒ ãªã—ï¼ˆè¿½åŠ ã®ã¿ï¼‰ |
| Colony | ãªã— | æ–°è¦ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ | âŒ ãªã—ï¼ˆè¿½åŠ ã®ã¿ï¼‰ |
| Queen Bee | ãªã— | æ–°è¦ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ | âŒ ãªã—ï¼ˆè¿½åŠ ã®ã¿ï¼‰ |
| Worker Bee | ãªã— | æ–°è¦ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ | âŒ ãªã—ï¼ˆè¿½åŠ ã®ã¿ï¼‰ |

---

## 2. Hive/ColonyçŠ¶æ…‹æ©Ÿæ¢°

### 2.0 HiveçŠ¶æ…‹æ©Ÿæ¢°

Hiveã«ã‚‚çŠ¶æ…‹ãŒå¿…è¦ï¼ˆè¨­è¨ˆæ¼ã‚Œã‚’è£œå®Œï¼‰:

```python
class HiveState(Enum):
    ACTIVE = "active"       # 1ã¤ä»¥ä¸Šã®ColonyãŒã‚¢ã‚¯ãƒ†ã‚£ãƒ–
    IDLE = "idle"           # å…¨ColonyãŒ idle/completed
    CLOSED = "closed"       # ã‚¯ãƒ­ãƒ¼ã‚ºæ¸ˆã¿ï¼ˆèª­ã¿å–ã‚Šå°‚ç”¨ï¼‰
```

é·ç§»ãƒ«ãƒ¼ãƒ«:
- `IDLE` â†’ `ACTIVE`: ã„ãšã‚Œã‹ã®ColonyãŒ `ACTIVE` ã«ãªã£ãŸæ™‚
- `ACTIVE` â†’ `IDLE`: å…¨ColonyãŒ `IDLE` or `COMPLETED` ã«ãªã£ãŸæ™‚
- `IDLE` â†’ `CLOSED`: `hive.closed` ã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œæ™‚ï¼ˆå…ƒã«æˆ»ã›ãªã„ï¼‰

### 2.1 ColonyçŠ¶æ…‹å®šç¾©

```python
class ColonyState(Enum):
    IDLE = "idle"           # ä½œæˆæ¸ˆã¿ã€ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªRunãªã—
    ACTIVE = "active"       # 1ã¤ä»¥ä¸Šã®RunãŒå®Ÿè¡Œä¸­
    COMPLETED = "completed" # å…¨RunãŒå®Œäº†
    FAILED = "failed"       # ç•°å¸¸çµ‚äº†
    SUSPENDED = "suspended" # ä¸€æ™‚åœæ­¢ä¸­
```

### 2.2 çŠ¶æ…‹é·ç§»å›³

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚             â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚    IDLE     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚           â”‚             â”‚           â”‚
        â”‚           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜           â”‚
        â”‚                  â”‚                  â”‚
        â”‚                  â”‚ run.started      â”‚
        â”‚                  â–¼                  â”‚
        â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
        â”‚           â”‚             â”‚           â”‚
  å…¨Runå®Œäº†         â”‚   ACTIVE    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ colony.failed
  (è‡ªå‹•é·ç§»)        â”‚             â”‚           â”‚
        â”‚           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜           â”‚
        â”‚                  â”‚                  â”‚
        â”‚                  â”‚                  â”‚
        â–¼                  â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             â”‚    â”‚             â”‚    â”‚             â”‚
â”‚  COMPLETED  â”‚    â”‚  SUSPENDED  â”‚    â”‚   FAILED    â”‚
â”‚             â”‚    â”‚             â”‚    â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚ resume
                          â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚   ACTIVE    â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 é·ç§»ãƒ«ãƒ¼ãƒ«

è£œè¶³: `auto_complete`

- `auto_complete` ã¯ **Colonyè¨­å®šï¼ˆä¾‹: `colony_config.auto_complete`ï¼‰** ã®ãƒ•ãƒ©ã‚°ã€‚
- `true` ã®å ´åˆã€Colonyé…ä¸‹ã®å…¨RunãŒå®Œäº†ã—ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ `COMPLETED` ã¸è‡ªå‹•é·ç§»ã™ã‚‹ã€‚
- `false` ã®å ´åˆã€å…¨Runå®Œäº†å¾Œã¯ `IDLE` ã«æˆ»ã‚‹ï¼ˆColonyã¯å†åˆ©ç”¨å¯èƒ½ï¼‰ã€‚

| ç¾åœ¨çŠ¶æ…‹ | ã‚¤ãƒ™ãƒ³ãƒˆ | æ¬¡çŠ¶æ…‹ | æ¡ä»¶ |
|---------|---------|--------|------|
| IDLE | run.started | ACTIVE | Colonyå†…ã§RunãŒé–‹å§‹ |
| ACTIVE | run.completed | ACTIVE | ä»–ã«å®Ÿè¡Œä¸­Runã‚ã‚Š |
| ACTIVE | run.completed | IDLE | å…¨Runå®Œäº†ã€auto_complete=false |
| ACTIVE | run.completed | COMPLETED | å…¨Runå®Œäº†ã€auto_complete=true |
| ACTIVE | colony.failed | FAILED | ç·Šæ€¥åœæ­¢ã¾ãŸã¯è‡´å‘½çš„ã‚¨ãƒ©ãƒ¼ï¼ˆé…ä¸‹Runã¸ `run.aborted` ãŒä¼æ’­ï¼‰ |
| ACTIVE | suspend | SUSPENDED | ä¸€æ™‚åœæ­¢è¦æ±‚ |
| SUSPENDED | resume | ACTIVE | å†é–‹è¦æ±‚ |

---

## 3. ã‚¤ãƒ™ãƒ³ãƒˆå‹ä¸€è¦§

### 3.1 æ–°è¦ã‚¤ãƒ™ãƒ³ãƒˆå‹ï¼ˆv5è¿½åŠ ï¼‰

```python
class EventType(Enum):
    # ... v4ã®æ—¢å­˜ã‚¤ãƒ™ãƒ³ãƒˆ ...
    
    # Hiveé–¢é€£ï¼ˆv5è¿½åŠ ï¼‰
    HIVE_CREATED = "hive.created"
    HIVE_CLOSED = "hive.closed"
    
    # Colonyé–¢é€£ï¼ˆv5è¿½åŠ ï¼‰
    COLONY_CREATED = "colony.created"
    COLONY_ACTIVATED = "colony.activated"
    COLONY_COMPLETED = "colony.completed"
    COLONY_FAILED = "colony.failed"
    COLONY_SUSPENDED = "colony.suspended"
    COLONY_RESUMED = "colony.resumed"
    
    # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“é€šä¿¡ï¼ˆv5è¿½åŠ ï¼‰
    OPINION_REQUESTED = "agent.opinion_requested"
    OPINION_RESPONDED = "agent.opinion_responded"
    
    # Worker Beeé–¢é€£ï¼ˆv5è¿½åŠ ï¼‰
    WORKER_ASSIGNED = "worker.assigned"
    WORKER_RELEASED = "worker.released"
    
    # ç›´æ¥ä»‹å…¥ãƒ»ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆv5è¿½åŠ ï¼‰
    USER_DIRECT_INTERVENTION = "user.direct_intervention"  # ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç›´æ¥ä»‹å…¥
    QUEEN_ESCALATION = "queen.escalation"                  # Queen Beeã‹ã‚‰ã®ç›´è¨´
    BEEKEEPER_FEEDBACK = "beekeeper.feedback"              # Beekeeperæ”¹å–„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
    
    # Decision Protocolï¼ˆæ„æ€æ±ºå®šãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã€v5.1è¿½åŠ ï¼‰
    PROPOSAL_CREATED = "decision.proposal.created"         # ææ¡ˆä½œæˆ
    DECISION_RECORDED = "decision.recorded"                # æ±ºå®šè¨˜éŒ²
    DECISION_APPLIED = "decision.applied"                  # æ±ºå®šé©ç”¨
    DECISION_SUPERSEDED = "decision.superseded"            # æ±ºå®šä¸Šæ›¸ã
    
    # Conferenceï¼ˆä¼šè­°ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã€v5.1è¿½åŠ ï¼‰
    CONFERENCE_STARTED = "conference.started"              # ä¼šè­°é–‹å§‹
    CONFERENCE_ENDED = "conference.ended"                  # ä¼šè­°çµ‚äº†
    
    # Conflict Detectionï¼ˆè¡çªæ¤œå‡ºã€v5.1è¿½åŠ ï¼‰
    CONFLICT_DETECTED = "conflict.detected"                # Colonyé–“æ„è¦‹è¡çªæ¤œå‡º
    CONFLICT_RESOLVED = "conflict.resolved"                # è¡çªè§£æ±º
    
    # Standard Failure/Timeoutï¼ˆæ¨™æº–å¤±æ•—ã€v5.1è¿½åŠ ï¼‰
    OPERATION_TIMEOUT = "operation.timeout"                # ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
    OPERATION_FAILED = "operation.failed"                  # æ“ä½œå¤±æ•—
```

### 3.2 ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ã‚­ãƒ¼ãƒ

é‡è¦: v4å®Ÿè£…ï¼ˆ`BaseEvent`ï¼‰ã¨ã®æ•´åˆ

- ç¾è¡Œã® `BaseEvent` ã¯ `run_id` / `task_id` / `actor` / `payload` ã‚’æŒã¤ã€‚
- Phase 1ã§ã¯ **å¾Œæ–¹äº’æ›æ€§ã¨å®Ÿè£…ã‚³ã‚¹ãƒˆæœ€å°åŒ–** ã®ãŸã‚ã€Hive/Colony/Agenté–¢é€£ã®è¿½åŠ æƒ…å ±ã¯åŸå‰‡ `payload` ã«æ ¼ç´ã™ã‚‹ã€‚
    - ä¾‹: `payload.hive_id`, `payload.colony_id`, `payload.request_id` ãªã©
    - `run_id` / `task_id` ã¯ã€Œæ—¢å­˜ã®Run/Taskã«ç´ã¥ãå ´åˆã®ã¿ã€è¨­å®šã—ã€ãã‚Œä»¥å¤–ã¯ `None` ã¨ã™ã‚‹
- å°†æ¥ï¼ˆPhase 2ä»¥é™ï¼‰ã«ã€`hive_id` / `colony_id` ã‚’ `BaseEvent` ã®ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¸æ˜‡æ ¼ã™ã‚‹æ¡ˆã¯æ¤œè¨å¯¾è±¡ï¼ˆãŸã ã—ç ´å£Šçš„å¤‰æ›´ã«ãªã‚Šã‚„ã™ã„ã®ã§æ…é‡ã«ï¼‰ã€‚

èª²é¡Œ: `run_id=None` ã®ã‚¤ãƒ™ãƒ³ãƒˆã®æ ¼ç´å…ˆ

- v4ã® `AkashicRecord.append()` ã¯ `run_id` å¿…é ˆï¼ˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ±ºå®šã«ä½¿ç”¨ï¼‰ã€‚
- `HiveCreatedEvent` ç­‰ã® `run_id=None` ã‚¤ãƒ™ãƒ³ãƒˆã¯ã€ä»¥ä¸‹ã„ãšã‚Œã‹ã§å¯¾å¿œ:
    - (A) å°‚ç”¨ã‚¹ãƒˆã‚¢: `Vault/hives/{hive_id}/events.jsonl` ã«åˆ¥é€”æ ¼ç´ï¼ˆæ¨å¥¨ï¼‰
    - (B) ã‚·ã‚¹ãƒ†ãƒ Run: ç‰¹åˆ¥ãª `run_id` (ä¾‹: `"__system__"`) ã«æ ¼ç´ã—ã€Hive/Colonyæ¨ªæ–­ã‚¤ãƒ™ãƒ³ãƒˆã‚’é›†ç´„
- Phase 1ã§ã¯ (A) ã‚’æ¡ç”¨ã—ã€Hive/Colonyã¯å°‚ç”¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ç®¡ç†ã™ã‚‹ã€‚

æ³¨æ„: `parse_event` ã®å‰æ–¹äº’æ›æ€§

- v4å®Ÿè£…ã® `parse_event` ã¯ `EventType(data["type"])` ã‚’å…ˆã«è©•ä¾¡ã™ã‚‹ãŸã‚ã€**æœªçŸ¥ã®typeæ–‡å­—åˆ—ã‚’èª­ã‚€ã¨ä¾‹å¤–ã«ãªã‚‹**ã€‚
- é‹ç”¨ã§ã€Œå¤ã„ãƒã‚¤ãƒŠãƒªãŒæ–°ã—ã„ã‚¤ãƒ™ãƒ³ãƒˆãƒ­ã‚°ã‚’èª­ã‚€ã€å¯èƒ½æ€§ãŒã‚ã‚‹ãªã‚‰ã€ä»¥ä¸‹ã„ãšã‚Œã‹ãŒå¿…è¦:
    - (A) ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æƒãˆã‚‹é‹ç”¨ï¼ˆPhase 1ã¯ã¾ãšã“ã‚Œã§ååˆ†ï¼‰
    - (B) `parse_event` ã‚’æ‹¡å¼µã—ã€æœªçŸ¥typeã¯ `BaseEvent` ã¨ã—ã¦èª­ã¿è¾¼ã‚ã‚‹è¨­è¨ˆã«å¤‰æ›´ï¼ˆå°†æ¥ã®æ”¹å–„é …ç›®ï¼‰

```python
class HiveCreatedEvent(BaseEvent):
    """Hiveä½œæˆã‚¤ãƒ™ãƒ³ãƒˆ"""
    type: Literal[EventType.HIVE_CREATED] = EventType.HIVE_CREATED
    # run_id: None
    # payload: { hive_id, name, goal, beekeeper_config }

class ColonyCreatedEvent(BaseEvent):
    """Colonyä½œæˆã‚¤ãƒ™ãƒ³ãƒˆ"""
    type: Literal[EventType.COLONY_CREATED] = EventType.COLONY_CREATED
    # run_id: None
    # payload: { hive_id, colony_id, name, domain, queen_config }

class ColonyActivatedEvent(BaseEvent):
    """Colonyã‚¢ã‚¯ãƒ†ã‚£ãƒ–åŒ–ã‚¤ãƒ™ãƒ³ãƒˆ"""
    type: Literal[EventType.COLONY_ACTIVATED] = EventType.COLONY_ACTIVATED
    # run_id: trigger_run_id
    # payload: { colony_id, trigger_run_id }

class OpinionRequestedEvent(BaseEvent):
    """æ„è¦‹è¦æ±‚ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆBeekeeper â†’ Queen Beeï¼‰"""
    type: Literal[EventType.OPINION_REQUESTED] = EventType.OPINION_REQUESTED
    # run_id: None
    # payload: { colony_id, context, question, priority, deadline }

class OpinionRespondedEvent(BaseEvent):
    """æ„è¦‹å›ç­”ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆQueen Bee â†’ Beekeeperï¼‰"""
    type: Literal[EventType.OPINION_RESPONDED] = EventType.OPINION_RESPONDED
    # run_id: None
    # payload: { colony_id, request_id, summary, details, questions, confidence }

class WorkerAssignedEvent(BaseEvent):
    """Worker Beeå‰²ã‚Šå½“ã¦ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆQueen Bee â†’ Worker Beeï¼‰"""
    type: Literal[EventType.WORKER_ASSIGNED] = EventType.WORKER_ASSIGNED
    # run_id: run_id
    # payload: { colony_id, worker_id, run_id, role, instruction }

class UserDirectInterventionEvent(BaseEvent):
    """ãƒ¦ãƒ¼ã‚¶ãƒ¼ç›´æ¥ä»‹å…¥ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ â†’ Queen Beeã€Beekeeperã‚’ãƒã‚¤ãƒ‘ã‚¹ï¼‰"""
    type: Literal[EventType.USER_DIRECT_INTERVENTION] = EventType.USER_DIRECT_INTERVENTION
    # run_id: None
    # payload: {
    #   colony_id: string,
    #   instruction: string,           # ç›´æ¥æŒ‡ç¤º
    #   reason: string,                # ä»‹å…¥ç†ç”±
    #   bypass_beekeeper: bool,        # Beekeeperã‚’ãƒã‚¤ãƒ‘ã‚¹ã—ãŸã‹
    #   share_with_beekeeper: bool,    # å…±æœ‰ã™ã‚‹ã‹ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆtrueæ¨å¥¨ï¼‰
    # }

class QueenEscalationEvent(BaseEvent):
    """Queen Beeã‹ã‚‰ã®ç›´è¨´ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆQueen Bee â†’ ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰"""
    type: Literal[EventType.QUEEN_ESCALATION] = EventType.QUEEN_ESCALATION
    # run_id: None
    # payload: {
    #   colony_id: string,
    #   escalation_type: EscalationType,    # ç›´è¨´ã®ç¨®é¡
    #   summary: string,                    # å•é¡Œã®è¦ç´„
    #   details: string,                    # è©³ç´°èª¬æ˜
    #   suggested_actions: list[string],    # ææ¡ˆã™ã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
    #   beekeeper_context: string,          # Beekeeperã¨ã®ã‚„ã‚Šå–ã‚Šã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
    # }

class BeekeeperFeedbackEvent(BaseEvent):
    """Beekeeperæ”¹å–„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼ˆã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è§£æ±ºå¾Œï¼‰"""
    type: Literal[EventType.BEEKEEPER_FEEDBACK] = EventType.BEEKEEPER_FEEDBACK
    # run_id: None
    # payload: {
    #   escalation_id: string,         # å¯¾å¿œã—ãŸã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ID
    #   resolution: string,            # è§£æ±ºæ–¹æ³•
    #   beekeeper_adjustment: dict,    # Beekeeperã¸ã®èª¿æ•´å†…å®¹
    # }
```

### 3.3 æ—¢å­˜ã‚¤ãƒ™ãƒ³ãƒˆã®æ‹¡å¼µ

```python
# RunStartedEvent - colony_idã‚’payloadã«è¿½åŠ ï¼ˆoptionalï¼‰
class RunStartedEvent(BaseEvent):
    # payload: { goal, colony_id? }  # v5ã§colony_idã‚’è¿½åŠ 

# TaskCreatedEvent - parent_task_idã‚’payloadã«è¿½åŠ ï¼ˆoptionalï¼‰
class TaskCreatedEvent(BaseEvent):
    # payload: { title, parent_task_id? }  # v5ã§parent_task_idã‚’è¿½åŠ 
```

---

## 4. Akashic Record (AR) ã¸ã®å½±éŸ¿

### 4.1 ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

é‡è¦: Phase 1ã¯ã€Œã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ–¹å¼ã€ã§å¾Œæ–¹äº’æ›ã‚’æœ€å„ªå…ˆ

- v4å®Ÿè£…ã® `AkashicRecord` ã¯ `Vault/{run_id}/events.jsonl`ï¼ˆVaultç›´ä¸‹ï¼‰ã‚’å‰æã« `list_runs()` ç­‰ã‚’å®Ÿè£…ã—ã¦ã„ã‚‹ã€‚
- ãã®ãŸã‚ Phase 1 ã§ã¯ **events.jsonlã®ç‰©ç†é…ç½®ã¯å¤‰æ›´ã—ãªã„**ï¼ˆæ—¢å­˜ã‚³ãƒ¼ãƒ‰ã¨æ—¢å­˜ãƒ†ã‚¹ãƒˆã‚’å£Šã•ãªã„ï¼‰ã€‚
- Hive/Colonyã®éšå±¤ç®¡ç†ã¯ã€ã¾ãš **è¿½åŠ ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ï¼ˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼‰** ã§å®Ÿç¾ã™ã‚‹ï¼ˆä¾‹: hive.json/colony.json/runs.jsonã€run_idâ†’colony_idãƒãƒƒãƒ—ï¼‰ã€‚
- ç‰©ç†çš„ãªéšå±¤åŒ–ï¼ˆrunsã‚’colonyé…ä¸‹ã¸ç§»å‹•ï¼‰ã¯ Phase 2ä»¥é™ã«æ¤œè¨ã—ã€ç§»è¡Œãƒ„ãƒ¼ãƒ«ã¨ `list_runs()` ã®å†è¨­è¨ˆãŒå‰æã€‚

```
Vault/
â”œâ”€â”€ hives/                         # Hiveåˆ¥ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆv5è¿½åŠ ãƒ»Phase 1ã¯ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ä¸­å¿ƒï¼‰
â”‚   â””â”€â”€ {hive_id}/
â”‚       â”œâ”€â”€ hive.json              # Hiveè¨­å®š
â”‚       â””â”€â”€ colonies/
â”‚           â””â”€â”€ {colony_id}/
â”‚               â”œâ”€â”€ colony.json    # Colonyè¨­å®šï¼ˆQueen Beeå«ã‚€ï¼‰
â”‚               â”œâ”€â”€ workers/
â”‚               â”‚   â””â”€â”€ {worker_id}.json
â”‚               â””â”€â”€ runs.json      # Colonyé…ä¸‹ã®Runä¸€è¦§ï¼ˆrun_idå‚ç…§ã®ãƒªã‚¹ãƒˆï¼‰
â”œâ”€â”€ index/                         # å‚ç…§ç”¨ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆä»»æ„ï¼‰
â”‚   â””â”€â”€ run_to_colony.json         # run_id -> {hive_id, colony_id} ã®ãƒãƒƒãƒ—
â””â”€â”€ {run_id}/                      # æ—¢å­˜: Runã¯Vaultç›´ä¸‹ã«events.jsonlã‚’ä¿æŒ
    â””â”€â”€ events.jsonl
```

### 4.2 å¾Œæ–¹äº’æ›æ€§

- **Colonyæœªæ‰€å±ã®Run**: v4ã®Runã¯ãã®ã¾ã¾å‹•ä½œï¼ˆ`colony_id`ãªã—ï¼‰
- **æ®µéšçš„ç§»è¡Œ**: æ—¢å­˜Runã‚’å¾Œã‹ã‚‰Colonyã«æ‰€å±ã•ã›ã‚‹ã“ã¨ã‚‚å¯èƒ½
- **ARãƒªãƒ—ãƒ¬ã‚¤**: `colony_id`ãŒãªã„ã‚¤ãƒ™ãƒ³ãƒˆã¯ã‚°ãƒ­ãƒ¼ãƒãƒ«Runã¨ã—ã¦æ‰±ã†

---

## 5. APIæ‹¡å¼µ

### 5.1 æ–°è¦ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

```
# Hiveæ“ä½œ
POST   /hives                         # Hiveä½œæˆ
GET    /hives                         # Hiveä¸€è¦§
GET    /hives/{hive_id}               # Hiveè©³ç´°
POST   /hives/{hive_id}/close         # Hiveã‚¯ãƒ­ãƒ¼ã‚ºï¼ˆå…¨Colonyå®Œäº†æ™‚ã®ã¿ï¼‰

è£œè¶³: ã€Œå‰Šé™¤ã€ã§ã¯ãªãã€Œã‚¯ãƒ­ãƒ¼ã‚ºã€ã‚’åŸºæœ¬ã¨ã™ã‚‹

- HiveForgeã¯ã‚¤ãƒ™ãƒ³ãƒˆã‚½ãƒ¼ã‚·ãƒ³ã‚°ã§ã‚ã‚Šã€ARä¸Šã®å±¥æ­´ã¯ç›£æŸ»ç›®çš„ã§ä¿æŒã•ã‚Œã‚‹ã€‚
- ç‰©ç†å‰Šé™¤ï¼ˆDELETEï¼‰ã¯é‹ç”¨ãƒ»ç›£æŸ»ä¸Šã®æ‰±ã„ãŒé›£ã—ã„ãŸã‚ã€è¨­è¨ˆä¸Šã¯ `hive.closed` ã‚’ç™ºè¡Œã™ã‚‹ã‚¯ãƒ­ãƒ¼ã‚ºæ“ä½œã‚’åŸºæœ¬ã«ã™ã‚‹ã€‚
- ç‰©ç†å‰Šé™¤ãŒå¿…è¦ãªå ´åˆã¯åˆ¥é€”ã€Œç®¡ç†è€…å‘ã‘ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ©Ÿèƒ½ï¼ˆå±é™ºæ“ä½œï¼‰ã€ã¨ã—ã¦åˆ‡ã‚Šå‡ºã™ã€‚

# Colonyæ“ä½œ
POST   /hives/{hive_id}/colonies      # Colonyä½œæˆ
GET    /hives/{hive_id}/colonies      # Colonyä¸€è¦§
GET    /colonies/{colony_id}          # Colonyè©³ç´°
POST   /colonies/{colony_id}/suspend  # ä¸€æ™‚åœæ­¢
POST   /colonies/{colony_id}/resume   # å†é–‹

# Colonyé…ä¸‹ã®Runæ“ä½œ
POST   /colonies/{colony_id}/runs     # Colonyå†…ã§Runé–‹å§‹
GET    /colonies/{colony_id}/runs     # Colonyå†…ã®Runä¸€è¦§

# ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“é€šä¿¡
POST   /colonies/{colony_id}/opinions          # æ„è¦‹è¦æ±‚é€ä¿¡
GET    /colonies/{colony_id}/opinions          # æ„è¦‹è¦æ±‚ä¸€è¦§
POST   /colonies/{colony_id}/opinions/{id}/respond  # æ„è¦‹å›ç­”

# Worker Beeæ“ä½œ
GET    /colonies/{colony_id}/workers  # Worker Beeä¸€è¦§
POST   /colonies/{colony_id}/workers  # Worker Beeè¿½åŠ 

# ãƒ¦ãƒ¼ã‚¶ãƒ¼ç›´æ¥ä»‹å…¥ï¼ˆBeekeeperãƒã‚¤ãƒ‘ã‚¹ï¼‰
POST   /colonies/{colony_id}/direct-intervention  # Queen Beeã«ç›´æ¥æŒ‡ç¤º
GET    /colonies/{colony_id}/queen/status         # Queen Beeã®çŠ¶æ…‹ç›´æ¥ç¢ºèª
POST   /colonies/{colony_id}/queen/chat           # Queen Beeã¨ç›´æ¥å¯¾è©±

# ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
GET    /escalations                              # å…¨ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä¸€è¦§
GET    /escalations/pending                      # æœªå¯¾å¿œã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
GET    /colonies/{colony_id}/escalations         # Colonyåˆ¥ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
POST   /escalations/{id}/resolve                 # ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è§£æ±º
POST   /escalations/{id}/feedback                # Beekeeperæ”¹å–„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯

# ç›£æŸ»ãƒ»ãƒ­ã‚°
GET    /audit/agents                             # å…¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ´»å‹•ãƒ­ã‚°
GET    /audit/agents/{agent_id}                  # ç‰¹å®šã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ãƒ­ã‚°
GET    /audit/interventions                      # ä»‹å…¥å±¥æ­´
```

### 5.2 æ—¢å­˜ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¸ã®å½±éŸ¿

```
# å¤‰æ›´ãªã—ï¼ˆå¾Œæ–¹äº’æ›ï¼‰
POST /runs                # colony_idã¯optionalãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦è¿½åŠ 
GET  /runs                # colony_idã§ãƒ•ã‚£ãƒ«ã‚¿å¯èƒ½
GET  /runs/{run_id}       # å¤‰æ›´ãªã—
```

è£œè¶³: Phase 1ã®æœ€å°å®Ÿè£…ï¼ˆæ—¢å­˜APIãƒ¢ãƒ‡ãƒ«ã‚’å£Šã•ãªã„ï¼‰

- ç¾è¡Œã® `StartRunRequest` ã¯ `goal` + `metadata` ã®ã¿ã€‚
- Phase 1ã§ã¯ `colony_id` ã¯ **`metadata["colony_id"]`** ã¨ã—ã¦æ¸¡ã—ã€`RunStartedEvent.payload` ã«ã‚‚æ ¼ç´ã™ã‚‹ã€‚
- `GET /runs` ã® `colony_id` ãƒ•ã‚£ãƒ«ã‚¿ã¯ã€ã¾ãšã¯ä»¥ä¸‹ã„ãšã‚Œã‹ã§å®Ÿç¾ã™ã‚‹:
    - (A) `Vault/index/run_to_colony.json` ç­‰ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹å‚ç…§ï¼ˆæ¨å¥¨ï¼‰
    - (B) å„Runã®å…ˆé ­ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆ`run.started`ï¼‰ã‚’ãƒªãƒ—ãƒ¬ã‚¤ã—ã¦ `payload.colony_id` ã‚’èª­ã‚€ï¼ˆå®Ÿè£…å®¹æ˜“ã ãŒé…ã„ï¼‰

---

## 6. MCPãƒ„ãƒ¼ãƒ«æ‹¡å¼µ

### 6.1 æ–°è¦ãƒ„ãƒ¼ãƒ«

```python
# Colonyæ“ä½œ
create_colony(hive_id: str, name: str, domain: str) -> ColonyInfo
list_colonies(hive_id: str) -> list[ColonyInfo]
get_colony_status(colony_id: str) -> ColonyStatus

# Colonyå†…ã§ã®Runæ“ä½œ
start_colony_run(colony_id: str, goal: str) -> RunInfo

# ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“é€šä¿¡
request_opinion(colony_id: str, question: str, priority: str) -> OpinionRequestId
respond_opinion(request_id: str, opinion: str, confidence: float) -> None
get_pending_opinions(colony_id: str) -> list[OpinionRequest]

# Worker Beeæ“ä½œ
assign_worker(colony_id: str, run_id: str, role: str) -> WorkerId
release_worker(worker_id: str) -> None

# ãƒ¦ãƒ¼ã‚¶ãƒ¼ç›´æ¥ä»‹å…¥ï¼ˆBeekeeperãƒã‚¤ãƒ‘ã‚¹ï¼‰
direct_instruct_queen(colony_id: str, instruction: str, reason: str) -> None
chat_with_queen(colony_id: str, message: str) -> QueenResponse
get_queen_status(colony_id: str) -> QueenStatus

# ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œ
list_escalations(pending_only: bool = True) -> list[Escalation]
resolve_escalation(escalation_id: str, resolution: str) -> None
provide_beekeeper_feedback(escalation_id: str, feedback: dict) -> None

# ç›£æŸ»
get_agent_logs(agent_id: str | None = None, limit: int = 100) -> list[AgentLog]
get_intervention_history() -> list[Intervention]
```

### 6.2 æ—¢å­˜ãƒ„ãƒ¼ãƒ«ã¸ã®å½±éŸ¿

```python
# start_run - colony_idã‚’optionalãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦è¿½åŠ 
start_run(goal: str, colony_id: str | None = None) -> RunInfo

# create_task - parent_task_idã‚’optionalãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦è¿½åŠ 
create_task(title: str, parent_task_id: str | None = None) -> TaskInfo
```

---

## 7. VS Codeæ‹¡å¼µã¸ã®å½±éŸ¿

### 7.1 æ–°è¦View

```
HiveForge Panel (ã‚µã‚¤ãƒ‰ãƒãƒ¼)
â”œâ”€â”€ ğŸ  Hive Overview          # Hiveå…¨ä½“æ¦‚è¦ï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼‰
â”œâ”€â”€ âš ï¸ Escalations (2)        # æœªå¯¾å¿œã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆç›´è¨´ï¼‰
â”œâ”€â”€ ğŸ Colonies               # Colonyä¸€è¦§
â”‚   â”œâ”€â”€ ğŸ“¦ UI/UX Colony (active)
â”‚   â”‚   â”œâ”€â”€ ğŸ‘‘ Queen Bee [ç›´æ¥å¯¾è©±]  # ã‚¯ãƒªãƒƒã‚¯ã§ç›´æ¥å¯¾è©±
â”‚   â”‚   â”œâ”€â”€ â–¶ï¸ Run: ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢è¨­è¨ˆ
â”‚   â”‚   â””â”€â”€ â–¶ï¸ Run: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¨­è¨ˆ
â”‚   â”œâ”€â”€ ğŸ“¦ API Colony (idle)
â”‚   â””â”€â”€ ğŸ“¦ Data Colony (active)
â”œâ”€â”€ ğŸ“‹ Tasks                  # ç¾åœ¨ã®Colony/Runã®ã‚¿ã‚¹ã‚¯
â”œâ”€â”€ â“ Requirements           # ç¢ºèªè¦è«‹
â”œâ”€â”€ ğŸ“œ Events                 # ã‚¤ãƒ™ãƒ³ãƒˆãƒ­ã‚°
â”œâ”€â”€ ğŸ¯ Decisions              # æ±ºå®šå±¥æ­´
â””â”€â”€ ğŸ” Audit Log              # ç›£æŸ»ãƒ­ã‚°ï¼ˆä»‹å…¥å±¥æ­´å«ã‚€ï¼‰
```

### 7.2 ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³é€šçŸ¥

Queen Beeã‹ã‚‰ã®ç›´è¨´ãŒã‚ã£ãŸå ´åˆã®è¡¨ç¤º:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸ Queen Beeã‹ã‚‰ã®ç›´è¨´                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“¦ UI/UX Colony                                            â”‚
â”‚                                                            â”‚
â”‚ å•é¡Œ: BeekeeperãŒã€Œãƒ¢ãƒã‚¤ãƒ«ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã€ã¨è¨€ã„ã¤ã¤ã€         â”‚
â”‚       ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ç”¨ã®ãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’è¦æ±‚ã—ã¦ã„ã¾ã™ã€‚     â”‚
â”‚                                                            â”‚
â”‚ ã‚¿ã‚¤ãƒ—: INSTRUCTION_CONFLICT                               â”‚
â”‚                                                            â”‚
â”‚ ææ¡ˆ:                                                      â”‚
â”‚   1. ãƒ¢ãƒã‚¤ãƒ«ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã§çµ±ä¸€                              â”‚
â”‚   2. ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚‚ä¸¦è¡Œã—ã¦ä½œæˆ                            â”‚
â”‚   3. Beekeeperã«å†ç¢ºèª                                     â”‚
â”‚                                                            â”‚
â”‚ [å¯¾å¿œã™ã‚‹] [å¾Œã§] [Queen Beeã¨ç›´æ¥å¯¾è©±]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.3 ç›´æ¥å¯¾è©±ãƒ¢ãƒ¼ãƒ‰

Queen Beeã¨ã®ç›´æ¥å¯¾è©±ï¼ˆBeekeeperã‚’ãƒã‚¤ãƒ‘ã‚¹ï¼‰:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘‘ ç›´æ¥å¯¾è©±: UI/UX Queen Bee                 [é€šå¸¸ãƒ¢ãƒ¼ãƒ‰ã¸] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âš ï¸ Beekeeperã‚’ãƒã‚¤ãƒ‘ã‚¹ã—ã¦ç›´æ¥å¯¾è©±ä¸­                        â”‚
â”‚                                                            â”‚
â”‚ [ãƒ¦ãƒ¼ã‚¶ãƒ¼] ä»Šã®ãƒ‡ã‚¶ã‚¤ãƒ³æ¡ˆã‚’è¦‹ã›ã¦                          â”‚
â”‚                                                            â”‚
â”‚ [Queen] ç¾åœ¨3æ¡ˆã‚ã‚Šã¾ã™:                                   â”‚
â”‚   1. ãƒ¢ãƒã‚¤ãƒ«ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆæ¡ˆ [ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼]                     â”‚
â”‚   2. ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—å„ªå…ˆæ¡ˆ [ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼]                       â”‚
â”‚   3. ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–çµ±åˆæ¡ˆ [ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼]                       â”‚
â”‚                                                            â”‚
â”‚ [ãƒ¦ãƒ¼ã‚¶ãƒ¼] 1ã§ã„ã“ã†ã€‚Beekeeperã«ã‚‚ä¼ãˆã¦ãŠã„ã¦            â”‚
â”‚                                                            â”‚
â”‚ [Queen] äº†è§£ã—ã¾ã—ãŸã€‚Beekeeperã«æ–¹é‡ã‚’ä¼é”ã—ã¾ã™ã€‚        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [å…¥åŠ›æ¬„] _________________________________ [é€ä¿¡]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.4 Conference Viewï¼ˆPhase 2ã§å®Ÿè£…ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ Conference: ECã‚µã‚¤ãƒˆé–‹ç™º                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Beekeeper] ECã‚µã‚¤ãƒˆã®åŸºæœ¬è¨­è¨ˆã‚’å§‹ã‚ã¾ã™ã€‚å„Colonyã«æ„è¦‹...â”‚
â”‚                                                            â”‚
â”‚ [UI/UX Queen] ãƒ¢ãƒã‚¤ãƒ«ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã§é€²ã‚ã¾ã™ã‹ï¼Ÿ             â”‚
â”‚         å€™è£œ: A) ãƒ¢ãƒã‚¤ãƒ«å„ªå…ˆ B) ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—å„ªå…ˆ          â”‚
â”‚                                                            â”‚
â”‚ [API Queen] æ±ºæ¸ˆã‚µãƒ¼ãƒ“ã‚¹ã¯Stripe/PayPay/è‡ªå‰ã®ã©ã‚Œã‚’ï¼Ÿ     â”‚
â”‚                                                            â”‚
â”‚ [Data Queen] å•†å“ã‚¹ã‚­ãƒ¼ãƒæ¡ˆã‚’ä½œæˆã—ã¾ã—ãŸã€‚[è©³ç´°ã‚’è¦‹ã‚‹]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [å…¥åŠ›æ¬„] _________________________________ [é€ä¿¡] [ğŸ¤]     â”‚
â”‚                                                            â”‚
â”‚ [ç›´æ¥ä»‹å…¥: Queené¸æŠ â–¼]  # ç‰¹å®šã®Queenã¨ç›´æ¥å¯¾è©±           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³

### 8.1 å˜ä¸€Colonyå‹•ä½œãƒ•ãƒ­ãƒ¼ï¼ˆPhase 1ï¼‰

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼           MCP/API          Colony            AR
   â”‚                 â”‚                â”‚              â”‚
   â”‚ create_colony   â”‚                â”‚              â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                â”‚              â”‚
   â”‚                 â”‚ ColonyCreated  â”‚              â”‚
   â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
   â”‚                 â”‚                â”‚              â”‚
   â”‚ start_run       â”‚                â”‚              â”‚
   â”‚ (colony_id)     â”‚                â”‚              â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                â”‚              â”‚
   â”‚                 â”‚ RunStarted     â”‚              â”‚
   â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
   â”‚                 â”‚ ColonyActivatedâ”‚              â”‚
   â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
   â”‚                 â”‚                â”‚              â”‚
   â”‚ create_task     â”‚                â”‚              â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ TaskCreated    â”‚              â”‚
   â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
   â”‚                 â”‚                â”‚              â”‚
   â”‚ complete_task   â”‚                â”‚              â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ TaskCompleted  â”‚              â”‚
   â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
   â”‚                 â”‚                â”‚              â”‚
   â”‚ complete_run    â”‚                â”‚              â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ RunCompleted   â”‚              â”‚
   â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
   â”‚                 â”‚                â”‚              â”‚
   â”‚                 â”‚ (å…¨Runå®Œäº†)     â”‚              â”‚
   â”‚                 â”‚ ColonyCompletedâ”‚              â”‚
   â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
```

### 8.2 ãƒãƒ«ãƒColonyå”èª¿ãƒ•ãƒ­ãƒ¼ï¼ˆPhase 2ï¼‰

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼    Beekeeper   UI Queen    API Queen   Data Queen
   â”‚         â”‚            â”‚           â”‚           â”‚
   â”‚ "ECã‚µã‚¤ãƒˆä½œã‚ŠãŸã„"   â”‚           â”‚           â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚           â”‚           â”‚
   â”‚         â”‚            â”‚           â”‚           â”‚
   â”‚         â”‚ OpinionRequest (ä¸¦åˆ—é€ä¿¡)          â”‚
   â”‚         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚           â”‚           â”‚
   â”‚         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚          â”‚
   â”‚         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
   â”‚         â”‚            â”‚           â”‚           â”‚
   â”‚         â”‚            â”‚ [Workeré”ã«ç›¸è«‡]      â”‚
   â”‚         â”‚            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
   â”‚         â”‚            â”‚           â”‚           â”‚
   â”‚         â”‚ OpinionResponse (ä¸¦åˆ—è¿”ä¿¡)         â”‚
   â”‚         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚           â”‚           â”‚
   â”‚         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚           â”‚
   â”‚         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
   â”‚         â”‚            â”‚           â”‚           â”‚
   â”‚         â”‚ [æ„è¦‹ã‚’çµ±åˆ]â”‚           â”‚           â”‚
   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”‚            â”‚           â”‚           â”‚
   â”‚ "ç¢ºèªäº‹é …3ã¤ã‚ã‚Šã¾ã™"â”‚           â”‚           â”‚
   â”‚         â”‚            â”‚           â”‚           â”‚
   â”‚ "ãƒ¢ãƒã‚¤ãƒ«å„ªå…ˆã€Stripeã€åœ¨åº«ãªã—"             â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚           â”‚           â”‚
   â”‚         â”‚ [å„Colonyã«ä¼é”]       â”‚           â”‚
   â”‚         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
```

### 8.3 ç›´æ¥ä»‹å…¥ãƒ•ãƒ­ãƒ¼ï¼ˆBeekeeperãƒã‚¤ãƒ‘ã‚¹ï¼‰

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼    Beekeeper   UI Queen    Worker A
   â”‚         â”‚            â”‚           â”‚
   â”‚ (Beekeeperã®å¿œç­”ãŒé…ã„/èª¤è§£ãŒã‚ã‚‹)
   â”‚                      â”‚           â”‚
   â”‚ direct_instruct_queenâ”‚           â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚           â”‚
   â”‚                      â”‚ DirectIntervention
   â”‚                      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º AR
   â”‚                      â”‚           â”‚
   â”‚                      â”‚ [æŒ‡ç¤ºã‚’å—é ˜]
   â”‚                      â”‚           â”‚
   â”‚                      â”‚ TaskAssignâ”‚
   â”‚                      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
   â”‚                      â”‚           â”‚
   â”‚                      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ TaskResult
   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚           â”‚
   â”‚ [çµæœã‚’ç›´æ¥å ±å‘Š]      â”‚           â”‚
   â”‚                      â”‚           â”‚
   â”‚                      â”‚ [Beekeeperã«çŠ¶æ³å…±æœ‰]
   â”‚                      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ (ä»»æ„)
   â”‚         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚           â”‚
   â”‚         â”‚ [ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ›´æ–°]      â”‚
```

### 8.4 ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ãƒ­ãƒ¼ï¼ˆQueen Beeã‹ã‚‰ã®ç›´è¨´ï¼‰

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼    Beekeeper   UI Queen    VS Code
   â”‚         â”‚            â”‚           â”‚
   â”‚         â”‚ OpinionReq â”‚           â”‚
   â”‚         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚           â”‚
   â”‚         â”‚            â”‚           â”‚
   â”‚         â”‚            â”‚ [çŸ›ç›¾ã‚’æ¤œçŸ¥]
   â”‚         â”‚            â”‚           â”‚
   â”‚         â”‚            â”‚ QueenEscalation
   â”‚         â”‚            â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º AR
   â”‚         â”‚            â”‚           â”‚
   â”‚         â”‚            â”‚ [é€šçŸ¥]    â”‚
   â”‚         â”‚            â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
   â”‚         â”‚            â”‚           â”‚
   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
   â”‚ âš ï¸ "UI/UX Queenã‹ã‚‰ã®ç›´è¨´"      â”‚â”‚
   â”‚                      â”‚           â”‚
   â”‚ [å¯¾å¿œé¸æŠ]            â”‚           â”‚
   â”‚  1. Queenç›´æ¥å¯¾è©±     â”‚           â”‚
   â”‚  2. Beekeeperèª¿æ•´     â”‚           â”‚
   â”‚  3. ä¸¡æ–¹ã«æŒ‡ç¤º        â”‚           â”‚
   â”‚                      â”‚           â”‚
   â”‚ resolve_escalation   â”‚           â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚           â”‚
   â”‚                      â”‚           â”‚
   â”‚ provide_beekeeper_feedback       â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚           â”‚
   â”‚         â”‚ [è¨­å®šæ›´æ–°]  â”‚           â”‚
   â”‚         â”‚            â”‚           â”‚
```

---

## 9. æ—¢å­˜ãƒ†ã‚¹ãƒˆã¸ã®å½±éŸ¿

### 9.1 å½±éŸ¿ãªã—ï¼ˆå¾Œæ–¹äº’æ›ï¼‰

- `tests/test_ar.py` - colony_idãªã—ã®Runã¯å¾“æ¥é€šã‚Šå‹•ä½œ
- `tests/test_events.py` - æ—¢å­˜ã‚¤ãƒ™ãƒ³ãƒˆå‹ã¯å¤‰æ›´ãªã—
- `tests/test_state_machines.py` - Run/TaskçŠ¶æ…‹æ©Ÿæ¢°ã¯å¤‰æ›´ãªã—
- `tests/test_api.py` - æ—¢å­˜ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯å¤‰æ›´ãªã—
- `tests/test_mcp_server.py` - æ—¢å­˜ãƒ„ãƒ¼ãƒ«ã¯å¤‰æ›´ãªã—

### 9.2 æ–°è¦ãƒ†ã‚¹ãƒˆï¼ˆè¿½åŠ ï¼‰

- `tests/test_colony.py` - ColonyçŠ¶æ…‹æ©Ÿæ¢°
- `tests/test_colony_events.py` - Colonyã‚¤ãƒ™ãƒ³ãƒˆå‹
- `tests/test_colony_api.py` - Colony API
- `tests/test_colony_mcp.py` - Colony MCPãƒ„ãƒ¼ãƒ«
- `tests/test_escalation.py` - ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½
- `tests/test_direct_intervention.py` - ç›´æ¥ä»‹å…¥æ©Ÿèƒ½
- `tests/test_decision_protocol.py` - Decision Protocolï¼ˆv5.1è¿½åŠ ï¼‰
- `tests/test_conflict_detection.py` - Conflict Detectionï¼ˆv5.1è¿½åŠ ï¼‰

---

## 10. Phase 1 å®Ÿè£…ã‚¿ã‚¹ã‚¯

### 10.0 å®Ÿè£…é †åºï¼ˆä¾å­˜é–¢ä¿‚ã‚’è€ƒæ…®ï¼‰

```
1. ã‚¤ãƒ™ãƒ³ãƒˆå‹å®šç¾© (events.py)
   â†“
2. Hive/Colonyãƒ¢ãƒ‡ãƒ«ãƒ»çŠ¶æ…‹æ©Ÿæ¢° (hive.py)
   â†“
3. Hiveå°‚ç”¨ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ (ar/hive_storage.py)
   â†“
4. ColonyæŠ•å½± (ar/colony_projections.py)
   â†“
5. Decision Protocolãƒ»Action Class (core/decision.py)  â† v5.1è¿½åŠ 
   â†“
6. APIãƒ«ãƒ¼ãƒˆ (routes/hives.py, routes/colonies.py)
   â†“
7. MCPãƒ„ãƒ¼ãƒ« (handlers/hive.py, handlers/colony.py)
   â†“
8. VS Codeæ‹¡å¼µ (coloniesProvider.ts)
```

### 10.1 Python Core (åŸºç›¤)

| Issue# | ã‚¿ã‚¹ã‚¯ | ãƒ•ã‚¡ã‚¤ãƒ« | è¦‹ç©(h) | ä¾å­˜ |
|--------|------|--------|---------|------|
| P1-01 | Hive/Colonyã‚¤ãƒ™ãƒ³ãƒˆå‹è¿½åŠ  | `core/events.py` | 2 | - |
| P1-02 | HiveState/ColonyStateå®šç¾© | `core/hive.py` | 1 | P1-01 |
| P1-03 | Hive/Colonyãƒ¢ãƒ‡ãƒ«(Pydantic) | `core/hive.py` | 2 | P1-02 |
| P1-04 | ColonyçŠ¶æ…‹æ©Ÿæ¢° | `core/hive.py` | 3 | P1-03 |
| P1-05 | Hiveå°‚ç”¨ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ | `core/ar/hive_storage.py` | 4 | P1-01 |
| P1-06 | ColonyæŠ•å½± | `core/ar/colony_projections.py` | 3 | P1-04 |
| P1-07 | ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ | `tests/test_hive.py`, `tests/test_colony.py` | 4 | P1-01ã€œP1-06 |

### 10.1.5 Python Core (v5.1æ‹¡å¼µ) - ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯å¯¾å¿œ

| Issue# | ã‚¿ã‚¹ã‚¯ | ãƒ•ã‚¡ã‚¤ãƒ« | è¦‹ç©(h) | ä¾å­˜ |
|--------|------|--------|---------|------|
| P1.5-01 | Decision Protocolã‚¤ãƒ™ãƒ³ãƒˆå‹è¿½åŠ  | `core/events.py` | 2 | P1-01 |
| P1.5-02 | Conferenceãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆè¿½åŠ  | `core/events.py` | 1 | P1-01 |
| P1.5-03 | ProjectContract ã‚¹ã‚­ãƒ¼ãƒå®šç¾© | `core/models/project_contract.py` | 2 | - |
| P1.5-04 | Action Classå®šç¾©ï¼ˆTrust Levelé€£æºï¼‰ | `core/models/action_class.py` | 2 | - |
| P1.5-05 | Conflict Detectionã‚¤ãƒ™ãƒ³ãƒˆå‹ | `core/events.py` | 1 | P1-01 |
| P1.5-06 | æ¨™æº– Failure/Timeoutã‚¤ãƒ™ãƒ³ãƒˆå‹ | `core/events.py` | 1 | P1-01 |
| P1.5-07 | v5.1ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ | `tests/test_decision_protocol.py` ç­‰ | 3 | P1.5-01ã€œ06 |

### 10.2 Python API

| Issue# | ã‚¿ã‚¹ã‚¯ | ãƒ•ã‚¡ã‚¤ãƒ« | è¦‹ç©(h) | ä¾å­˜ |
|--------|------|--------|---------|------|
| P1-08 | Hive APIãƒ«ãƒ¼ãƒˆ | `api/routes/hives.py` | 3 | P1-05 |
| P1-09 | Colony APIãƒ«ãƒ¼ãƒˆ | `api/routes/colonies.py` | 4 | P1-06 |
| P1-10 | APIãƒ¢ãƒ‡ãƒ«è¿½åŠ  | `api/models.py` | 1 | - |
| P1-11 | APIãƒ†ã‚¹ãƒˆ | `tests/test_hive_api.py`, `tests/test_colony_api.py` | 3 | P1-08,P1-09 |

### 10.3 Python MCP

| Issue# | ã‚¿ã‚¹ã‚¯ | ãƒ•ã‚¡ã‚¤ãƒ« | è¦‹ç©(h) | ä¾å­˜ |
|--------|------|--------|---------|------|
| P1-12 | Hive MCPãƒ„ãƒ¼ãƒ« | `mcp_server/handlers/hive.py` | 2 | P1-08 |
| P1-13 | Colony MCPãƒ„ãƒ¼ãƒ« | `mcp_server/handlers/colony.py` | 3 | P1-09 |
| P1-14 | MCPãƒ†ã‚¹ãƒˆ | `tests/test_hive_mcp.py`, `tests/test_colony_mcp.py` | 2 | P1-12,P1-13 |

### 10.4 VS Codeæ‹¡å¼µ

| Issue# | ã‚¿ã‚¹ã‚¯ | ãƒ•ã‚¡ã‚¤ãƒ« | è¦‹ç©(h) | ä¾å­˜ |
|--------|------|--------|---------|------|
| P1-15 | Colony TreeView Provider | `providers/coloniesProvider.ts` | 4 | P1-09 |
| P1-16 | Colonyã‚³ãƒãƒ³ãƒ‰ | `commands/colonyCommands.ts` | 2 | P1-15 |
| P1-17 | package.jsonæ›´æ–° | `package.json` | 1 | P1-15 |
| P1-18 | æ‹¡å¼µãƒ†ã‚¹ãƒˆ | `test/colony.test.ts` | 2 | P1-15,P1-16 |

### 10.5 ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

| Issue# | ã‚¿ã‚¹ã‚¯ | ãƒ•ã‚¡ã‚¤ãƒ« | è¦‹ç©(h) | ä¾å­˜ |
|--------|------|--------|---------|------|
| P1-19 | ARCHITECTURE.mdæ›´æ–° | `docs/ARCHITECTURE.md` | 1 | P1-07 |
| P1-20 | QUICKSTART.mdæ›´æ–° | `docs/QUICKSTART.md` | 1 | P1-11 |

### 10.6 åˆè¨ˆè¦‹ç©

- Core: 19h
- API: 11h  
- MCP: 7h
- VS Code: 9h
- Docs: 2h
- **åˆè¨ˆ: ç´„48h (ç´„6äººæ—¥)**

---

## 11. æ±ºå®šäº‹é …ãƒ­ã‚°

| æ—¥ä»˜ | æ±ºå®š | ç†ç”± |
|------|------|------|
| 2026-02-01 | Run.colony_idã¯optional | v4å¾Œæ–¹äº’æ›æ€§ã®ãŸã‚ |
| 2026-02-01 | Colonyé…ä¸‹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã‚’è¿½åŠ  | Colonyå˜ä½ã§ã®ARç®¡ç†ã®ãŸã‚ |
| 2026-02-01 | Phase 1ã§ã¯å˜ä¸€Colonyã®ã¿ | è¤‡é›‘æ€§ã‚’æ®µéšçš„ã«å°å…¥ |
| 2026-02-01 | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«Queen Beeç›´æ¥å¯¾è©±æ¨©é™ã‚’ä»˜ä¸ | Beekeeperãƒã‚¤ãƒ‘ã‚¹ã®å¿…è¦æ€§ |
| 2026-02-01 | Queen Beeã‹ã‚‰ã®ç›´è¨´ï¼ˆEscalationï¼‰æ©Ÿèƒ½è¿½åŠ  | Beekeeperæ”¹å–„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ |
| 2026-02-01 | Hiveæ°¸ç¶šåŒ–å½¢å¼ã¯JSON | ARã¨åŒã˜å½¢å¼ã§çµ±ä¸€ã€ãƒ„ãƒ¼ãƒ«é€£æºå®¹æ˜“ |
| 2026-02-01 | `run_id=None` ã‚¤ãƒ™ãƒ³ãƒˆã¯å°‚ç”¨ã‚¹ãƒˆã‚¢ã«æ ¼ç´ | v4ã®ARå®Ÿè£…ã‚’å¤‰æ›´ã›ãšå¾Œæ–¹äº’æ›ç¶­æŒ |
| 2026-02-01 | Phase 1ã¯ `parse_event` æœªå¯¾å¿œã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³é‹ç”¨ | å®Ÿè£…ã‚³ã‚¹ãƒˆæœ€å°åŒ– |
| 2026-02-01 | Phase 1ã¯Vaultç‰©ç†æ§‹é€ å¤‰æ›´ãªã—ï¼ˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ–¹å¼ï¼‰ | æ—¢å­˜ãƒ†ã‚¹ãƒˆã‚’å£Šã•ãªã„ |
| 2026-02-01 | Decision Protocolæ¡ç”¨ï¼ˆææ¡ˆâ†’æ±ºå®šâ†’é©ç”¨â†’ä¸Šæ›¸ãï¼‰ | å¤–éƒ¨ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯å¯¾å¿œ: æ„æ€æ±ºå®šè¿½è·¡ã®å¿…è¦æ€§ |
| 2026-02-01 | Project Contractæ¡ç”¨ï¼ˆæ§‹é€ åŒ–ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼‰ | å¤–éƒ¨ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯å¯¾å¿œ: context:stringã§ã¯æ›–æ˜§ |
| 2026-02-01 | Action Classæ¡ç”¨ï¼ˆRead-only/Reversible/Irreversibleï¼‰ | å¤–éƒ¨ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯å¯¾å¿œ: Trust Levelé€£æºå¼·åŒ– |
| 2026-02-01 | Conflict Detectionæ¡ç”¨ï¼ˆColonyé–“è¡çªæ¤œå‡ºï¼‰ | å¤–éƒ¨ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯å¯¾å¿œ: èª¿åœãƒ«ãƒ¼ãƒ«æ˜ç¢ºåŒ– |
| 2026-02-01 | Conference ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆè¿½åŠ  | å¤–éƒ¨ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯å¯¾å¿œ: ä¼šè­°çŠ¶æ…‹è¿½è·¡ |
| 2026-02-01 | Phase 6-7ã«ã‚²ãƒ¼ãƒˆæ¡ä»¶ã‚’è¨­å®š | å¤–éƒ¨ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯å¯¾å¿œ: ã‚¹ã‚³ãƒ¼ãƒ—çˆ†ç™ºé˜²æ­¢ |

---

## 12. æœªæ±ºå®šäº‹é …

| é …ç›® | é¸æŠè‚¢ | æ±ºå®šäºˆå®š |
|------|--------|----------|
| è¤‡æ•°Colonyé–“ã®å„ªå…ˆåº¦åˆ¶å¾¡ | A: é™çš„è¨­å®š B: å‹•çš„èª¿æ•´ | Phase 2é–‹å§‹å‰ |
| Worker Beeã®å®Ÿè£…æ–¹æ³• | A: å€‹åˆ¥ãƒ—ãƒ­ã‚»ã‚¹ B: ã‚¹ãƒ¬ãƒƒãƒ‰ C: å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ | Phase 2é–‹å§‹å‰ |
| `parse_event` ã®å‰æ–¹äº’æ›æ‹¡å¼µ | æœªçŸ¥typeã‚’BaseEventã¨ã—ã¦èª­ã¿è¾¼ã‚€ | Phase 2ä»¥é™ |
| Vaultç‰©ç†æ§‹é€ ã®éšå±¤åŒ– | Runã‚’Colonyé…ä¸‹ã«ç§»å‹• | Phase 2ä»¥é™ï¼ˆç§»è¡Œãƒ„ãƒ¼ãƒ«å¿…è¦ï¼‰ |

---

## 13. Phase 6-7 ã‚²ãƒ¼ãƒˆæ¡ä»¶

> âš ï¸ ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯å¯¾å¿œ: ã‚¹ã‚³ãƒ¼ãƒ—çˆ†ç™ºãƒªã‚¹ã‚¯è»½æ¸›ã®ãŸã‚ã€Phase 6-7é–‹å§‹ã«ã¯ã‚²ãƒ¼ãƒˆæ¡ä»¶ã‚’è¨­å®š

### 13.1 Phase 6ï¼ˆä¼šè­°Botï¼‰é–‹å§‹æ¡ä»¶

Phase 6ã‚’é–‹å§‹ã™ã‚‹å‰ã«ã€ä»¥ä¸‹ãŒ**å®‰å®šç¨¼åƒ**ã—ã¦ã„ã‚‹ã“ã¨:

| æ¡ä»¶ | æ¤œè¨¼æ–¹æ³• | è²¬ä»»è€… |
|------|---------|--------|
| Decision Protocol ãŒæ­£å¸¸å‹•ä½œ | æ±ºå®šãƒ­ã‚°ã®ä½œæˆãƒ»å‚ç…§ãƒ»ä¸Šæ›¸ããŒå‹•ä½œ | Core Team |
| Conflict Detection ãŒæ­£å¸¸å‹•ä½œ | è¡çªæ¤œå‡ºâ†’èª¿åœãƒ•ãƒ­ãƒ¼ãŒE2Eã§å‹•ä½œ | Core Team |
| åŸºæœ¬ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†ãŒå‹•ä½œ | ã‚¤ãƒ™ãƒ³ãƒˆæ•°ã€ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ã€ã‚¨ãƒ©ãƒ¼ç‡ãŒå–å¾—å¯èƒ½ | Core Team |
| Phase 5ï¼ˆå§”ä»»ã‚·ã‚¹ãƒ†ãƒ ï¼‰å®Œäº† | å…¨ãƒ†ã‚¹ãƒˆãƒ‘ã‚¹ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°æ¸ˆã¿ | PM |

### 13.2 Phase 7ï¼ˆRequirements Discoveryï¼‰é–‹å§‹æ¡ä»¶

Phase 7ã‚’é–‹å§‹ã™ã‚‹å‰ã«ã€ä»¥ä¸‹ãŒ**å®‰å®šç¨¼åƒ**ã—ã¦ã„ã‚‹ã“ã¨:

| æ¡ä»¶ | æ¤œè¨¼æ–¹æ³• | è²¬ä»»è€… |
|------|---------|--------|
| Phase 6ï¼ˆä¼šè­°Botï¼‰ãŒå°‘ãªãã¨ã‚‚1ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§å‹•ä½œ | Teams/Zoom/Meet ã®ã„ãšã‚Œã‹ã§å®Ÿä¼šè­°ãƒ†ã‚¹ãƒˆ | Core Team |
| Project Contract ã‚¹ã‚­ãƒ¼ãƒãŒå®Ÿé‹ç”¨ã§ãƒ†ã‚¹ãƒˆæ¸ˆã¿ | å®Ÿãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§2é€±é–“ä»¥ä¸Šä½¿ç”¨ | PM |
| Discovery Tree ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ã®è¨­è¨ˆãƒ¬ãƒ“ãƒ¥ãƒ¼å®Œäº† | è¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ‰¿èªæ¸ˆã¿ | Architect |

### 13.3 ã‚²ãƒ¼ãƒˆåˆ¤å®šãƒ—ãƒ­ã‚»ã‚¹

```
1. å‰Phaseã®å…¨ã‚¿ã‚¹ã‚¯å®Œäº†
   â†“
2. ã‚²ãƒ¼ãƒˆæ¡ä»¶ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆä½œæˆ
   â†“
3. å„æ¡ä»¶ã®æ¤œè¨¼ï¼ˆãƒ†ã‚¹ãƒˆ/ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼‰
   â†“
4. ã‚²ãƒ¼ãƒˆåˆ¤å®šä¼šè­°ï¼ˆ30åˆ†ï¼‰
   â†“
5. GO/NO-GO åˆ¤å®š
   â†“
6. NO-GOã®å ´åˆ: æ˜¯æ­£ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®šç¾©ã—ã€å†åˆ¤å®šæ—¥ã‚’è¨­å®š
```
