# HiveForge ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆæ›¸

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€HiveForgeã®ç¾åœ¨ã®è¨­è¨ˆã¨å®Ÿè£…çŠ¶æ³ã‚’èª¬æ˜ã—ã¾ã™ã€‚

---

## ç›®æ¬¡

1. [ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦](#1-ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦)
2. [ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹æˆ](#2-ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹æˆ)
3. [éšå±¤ãƒ¢ãƒ‡ãƒ«ï¼ˆHive/Colonyï¼‰](#3-éšå±¤ãƒ¢ãƒ‡ãƒ«hivecolony)
4. [ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«](#4-ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«)
5. [APIä»•æ§˜](#5-apiä»•æ§˜)
6. [çŠ¶æ…‹æ©Ÿæ¢°](#6-çŠ¶æ…‹æ©Ÿæ¢°)
7. [ã‚¤ãƒ™ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ](#7-ã‚¤ãƒ™ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ )
8. [å› æœãƒªãƒ³ã‚¯ï¼ˆLineageï¼‰](#8-å› æœãƒªãƒ³ã‚¯lineage)
9. [ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ](#9-ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ )
10. [è¨­å®š](#10-è¨­å®š)
11. [é–‹ç™ºè¨ˆç”»ãƒ»ã‚²ãƒ¼ãƒˆæ¡ä»¶](#11-é–‹ç™ºè¨ˆç”»ã‚²ãƒ¼ãƒˆæ¡ä»¶)
12. [ä»Šå¾Œã®æ‹¡å¼µ](#12-ä»Šå¾Œã®æ‹¡å¼µ)

---

## 1. ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

### 1.1 åŸºæœ¬æ€æƒ³

HiveForgeã¯ã€Œ**ä¿¡é ¼ã§ãã‚‹éƒ¨å“ã‚’ã€ä¿¡é ¼ã§ãã‚‹çµ„ã¿åˆã‚ã›æ–¹ã‚’ã—ã¦ã€ä¿¡é ¼ã§ãã‚‹ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½œã‚‹**ã€ã¨ã„ã†ç†å¿µã«åŸºã¥ã„ã¦ã„ã¾ã™ã€‚

### 1.2 ã‚³ã‚¢åŸå‰‡

- **ã‚¤ãƒ™ãƒ³ãƒˆã‚½ãƒ¼ã‚·ãƒ³ã‚°**: å…¨ã¦ã®çŠ¶æ…‹å¤‰æ›´ã‚’ã‚¤ãƒ™ãƒ³ãƒˆã¨ã—ã¦è¨˜éŒ²
- **ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«**: ã‚¤ãƒ™ãƒ³ãƒˆã¯ä¸€åº¦æ›¸ãè¾¼ã¾ã‚ŒãŸã‚‰å¤‰æ›´ä¸å¯
- **è¿½è·¡å¯èƒ½æ€§**: ä»»æ„ã®æˆæœç‰©ã‹ã‚‰ã€Œãªãœã€ã‚’é¡åŠå¯èƒ½
- **åˆ¶å¾¡å¯èƒ½æ€§**: çŠ¶æ…‹æ©Ÿæ¢°ã«ã‚ˆã‚‹å³å¯†ãªçŠ¶æ…‹ç®¡ç†ã¨ç·Šæ€¥åœæ­¢

### 1.3 ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         VS Code                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  GitHub Copilot  â”‚  â”‚  HiveForge Extension           â”‚   â”‚
â”‚  â”‚      Chat        â”‚  â”‚  â”œâ”€ Hive Monitor (Webview)     â”‚   â”‚
â”‚  â”‚  ï¼ˆå¯¾è©±ãƒ»æ“ä½œï¼‰   â”‚  â”‚  â”œâ”€ ã‚¤ãƒ™ãƒ³ãƒˆãƒ­ã‚° (TreeView)    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼             â”‚   â”‚
â”‚           â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚ MCP                         â”‚ HTTP
            â–¼                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HiveForge MCP Server â”‚    â”‚    HiveForge API Server     â”‚
â”‚  (stdioé€šä¿¡)          â”‚    â”‚    (FastAPI / REST)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                               â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆéšå±¤                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Beekeeperï¼ˆé¤Šèœ‚å®¶ / ãƒ•ã‚¡ã‚·ãƒªãƒ†ãƒ¼ã‚¿ãƒ¼ï¼‰             â”‚  â”‚
â”‚  â”‚  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã®ä¸»å¯¾è©±ã€è¤‡æ•°Hiveã®çµ±æ‹¬ç®¡ç†           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                         â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Hiveï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼‰                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Sentinel Hornetï¼ˆç›£è¦–ï¼‰                      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - æš´èµ°/ãƒ«ãƒ¼ãƒ—/ã‚³ã‚¹ãƒˆè¶…éæ¤œå‡º â†’ å¼·åˆ¶åœæ­¢      â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚Colony: UI/UXâ”‚ â”‚Colony: API  â”‚ â”‚Colony:Infraâ”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Queen Bee   â”‚ â”‚ Queen Bee   â”‚ â”‚ Queen Bee  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Worker Beeâ€¦ â”‚ â”‚ Worker Beeâ€¦ â”‚ â”‚ Worker Beeâ€¦â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚         Hive Core            â”‚
            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
            â”‚  â”‚   Akashic Record (AR)  â”‚  â”‚
            â”‚  â”‚   - ã‚¤ãƒ™ãƒ³ãƒˆæ°¸ç¶šåŒ–     â”‚  â”‚
            â”‚  â”‚   - ãƒãƒƒã‚·ãƒ¥é€£é–       â”‚  â”‚
            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
            â”‚  â”‚    State Machines      â”‚  â”‚
            â”‚  â”‚   - Run / Task / Req   â”‚  â”‚
            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
            â”‚  â”‚     Projections        â”‚  â”‚
            â”‚  â”‚   - ã‚¤ãƒ™ãƒ³ãƒˆâ†’çŠ¶æ…‹     â”‚  â”‚
            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚      Vault (ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ )  â”‚
            â”‚  â””â”€â”€ {run_id}/events.jsonl   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹æˆ

### 2.1 ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä¸€è¦§

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | å½¹å‰² | å®Ÿè£…çŠ¶æ³ |
|----------------|------|----------|
| **Hive Core** | ã‚¤ãƒ™ãƒ³ãƒˆç®¡ç†ãƒ»çŠ¶æ…‹æ©Ÿæ¢°ãƒ»æŠ•å½± | âœ… å®Ÿè£…æ¸ˆãƒ»ãƒ†ã‚¹ãƒˆæ¸ˆ |
| **API Server** | REST API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | âš ï¸ éƒ¨åˆ†çš„ï¼ˆHive/ColonyãŒã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªdictã€ARæœªç§»è¡Œï¼‰â†’ M1 |
| **MCP Server** | Copilot Chaté€£æº | âœ… å®Ÿè£…æ¸ˆãƒ»ãƒ†ã‚¹ãƒˆæ¸ˆ |
| **CLI** | ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ | âœ… å®Ÿè£…æ¸ˆï¼ˆå‹æ³¨é‡ˆä¸è¶³ â†’ M1-3ï¼‰ |
| **Beekeeper** | ãƒ¦ãƒ¼ã‚¶ãƒ¼çª“å£ãƒ»Colonyé–“èª¿æ•´ | âš ï¸ ãƒãƒ³ãƒ‰ãƒ©å®Ÿè£…æ¸ˆã€Serverå¤§åŠã‚¹ã‚¿ãƒ– â†’ M1-2 |
| **Queen Bee** | Colonyçµ±æ‹¬ãƒ»ã‚¿ã‚¹ã‚¯åˆ†è§£ | âš ï¸ åŸºç›¤å®Œäº†ã€ã‚¿ã‚¹ã‚¯åˆ†è§£ã‚¹ã‚¿ãƒ– â†’ M3-1 |
| **Worker Bee** | ã‚¿ã‚¹ã‚¯å®Ÿè¡Œï¼ˆMCPã‚µãƒ–ãƒ—ãƒ­ã‚»ã‚¹ï¼‰ | âœ… å®Ÿè£…æ¸ˆï¼ˆãƒ„ãƒ¼ãƒ«å®Ÿè¡Œ, ãƒªãƒˆãƒ©ã‚¤, Trustï¼‰ |
| **Sentinel Hornet** | Hiveå†…ç›£è¦–ãƒ»ç•°å¸¸æ¤œå‡ºãƒ»å¼·åˆ¶åœæ­¢ | âŒ æœªå®Ÿè£… â†’ M2-0 |
| **LLM Orchestrator** | è‡ªå¾‹çš„ã‚¿ã‚¹ã‚¯åˆ†è§£ãƒ»å®Ÿè¡Œ | âŒ æœªå®Ÿè£… â†’ M3-2 |
| **VS Codeæ‹¡å¼µ** (TreeView) | Activityéšå±¤è¡¨ç¤º | âœ… APIæ¥ç¶šæ¸ˆ |
| **VS Codeæ‹¡å¼µ** (Hive Monitor) | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ´»å‹•å¯è¦–åŒ– | âœ… å®Ÿè£…æ¸ˆ |
| **VS Codeæ‹¡å¼µ** (ã‚³ãƒãƒ³ãƒ‰) | Hive/Colonyæ“ä½œ | âš ï¸ UIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ã¿ã€APIæœªæ¥ç¶š â†’ M2-1 |
| **Agent UI** | ãƒ–ãƒ©ã‚¦ã‚¶è‡ªå‹•æ“ä½œMCPã‚µãƒ¼ãƒãƒ¼ | âœ… å®Ÿè£…æ¸ˆ |
| **VLM** | ç”»åƒè§£æãƒ»ç”»é¢èªè­˜ | âœ… å®Ÿè£…æ¸ˆ |
| **VLM Tester** | Playwright + VLMã«ã‚ˆã‚‹E2Eãƒ†ã‚¹ãƒˆ | âœ… å®Ÿè£…æ¸ˆ |
| **Silence Detector** | æ²ˆé»™æ¤œå‡º | âœ… å®Ÿè£…æ¸ˆ |

> å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®è©³ç´°ãªå®Ÿæ…‹ã¨ã‚®ãƒ£ãƒƒãƒ—ã¯ [DEVELOPMENT_PLAN_v1.md](DEVELOPMENT_PLAN_v1.md) Â§1.3 ã‚’å‚ç…§ã€‚
> ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ï¼ˆM1ã€œM4ï¼‰ã®è¨˜å·ã¯åŒè¨ˆç”»ã® Â§3 ã«å¯¾å¿œã€‚

### 2.2 ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ä¾å­˜é–¢ä¿‚

```
hiveforge/
â”œâ”€â”€ core/                  # ã‚³ã‚¢ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆä»–ã‹ã‚‰å‚ç…§ã•ã‚Œã‚‹ï¼‰
â”‚   â”œâ”€â”€ events.py         # ã‚¤ãƒ™ãƒ³ãƒˆãƒ¢ãƒ‡ãƒ«
â”‚   â”œâ”€â”€ config.py         # è¨­å®šç®¡ç†
â”‚   â”œâ”€â”€ activity_bus.py   # Activity Bus
â”‚   â”œâ”€â”€ lineage.py        # å› æœãƒªãƒ³ã‚¯
â”‚   â”œâ”€â”€ policy_gate.py    # ãƒãƒªã‚·ãƒ¼ã‚²ãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ rate_limiter.py   # ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒã‚¿ãƒ¼
â”‚   â”œâ”€â”€ models/           # ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«
â”‚   â”‚   â”œâ”€â”€ action_class.py
â”‚   â”‚   â””â”€â”€ project_contract.py
â”‚   â”œâ”€â”€ ar/               # Akashic Record
â”‚   â”‚   â”œâ”€â”€ storage.py        # Runæ°¸ç¶šåŒ–
â”‚   â”‚   â”œâ”€â”€ projections.py    # RunçŠ¶æ…‹æŠ•å½±
â”‚   â”‚   â”œâ”€â”€ hive_storage.py   # Hive/Colonyæ°¸ç¶šåŒ–
â”‚   â”‚   â””â”€â”€ hive_projections.py # Hive/ColonyæŠ•å½±
â”‚   â””â”€â”€ state/            # çŠ¶æ…‹æ©Ÿæ¢°
â”‚       â”œâ”€â”€ machines.py        # Run/Task/Requirement SM
â”‚       â”œâ”€â”€ projections.py     # çŠ¶æ…‹æŠ•å½±
â”‚       â”œâ”€â”€ colony_progress.py # Colonyé€²æ—è¿½è·¡
â”‚       â””â”€â”€ conference.py      # ConferenceçŠ¶æ…‹
â”œâ”€â”€ api/                   # REST APIï¼ˆcoreã«ä¾å­˜ï¼‰
â”‚   â”œâ”€â”€ server.py         # FastAPIã‚¢ãƒ—ãƒª
â”‚   â”œâ”€â”€ dependencies.py   # ä¾å­˜æ€§æ³¨å…¥ï¼ˆAppStateï¼‰
â”‚   â”œâ”€â”€ helpers.py        # å¾Œæ–¹äº’æ›ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ models.py         # APIãƒ¢ãƒ‡ãƒ«
â”‚   â””â”€â”€ routes/           # ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
â”‚       â”œâ”€â”€ runs.py       # Runé–¢é€£
â”‚       â”œâ”€â”€ tasks.py      # Taské–¢é€£
â”‚       â”œâ”€â”€ events.py     # Eventé–¢é€£
â”‚       â”œâ”€â”€ requirements.py # Requirementé–¢é€£
â”‚       â”œâ”€â”€ hives.py      # Hive CRUD
â”‚       â”œâ”€â”€ colonies.py   # Colony CRUD
â”‚       â”œâ”€â”€ activity.py   # Activity API
â”‚       â”œâ”€â”€ conferences.py # Conference API
â”‚       â”œâ”€â”€ interventions.py # Intervention API
â”‚       â””â”€â”€ system.py     # ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ç­‰
â”œâ”€â”€ mcp_server/            # MCP Serverï¼ˆcoreã«ä¾å­˜ï¼‰
â”‚   â”œâ”€â”€ server.py
â”‚   â”œâ”€â”€ tools.py          # ãƒ„ãƒ¼ãƒ«å®šç¾©
â”‚   â””â”€â”€ handlers/         # ãƒãƒ³ãƒ‰ãƒ©ãƒ¼å®Ÿè£…
â”œâ”€â”€ beekeeper/             # Beekeeperå±¤ï¼ˆcore, llmã«ä¾å­˜ï¼‰
â”‚   â”œâ”€â”€ server.py         # MCPã‚µãƒ¼ãƒãƒ¼
â”‚   â”œâ”€â”€ handler.py        # ã‚³ã‚¢ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
â”‚   â”œâ”€â”€ session.py        # ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
â”‚   â”œâ”€â”€ projection.py     # çŠ¶æ…‹æŠ•å½±
â”‚   â”œâ”€â”€ conference.py     # Conferenceæ©Ÿèƒ½
â”‚   â”œâ”€â”€ conflict.py       # è¡çªæ¤œå‡º
â”‚   â”œâ”€â”€ escalation.py     # ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â””â”€â”€ resolver.py       # è¡çªè§£æ±º
â”œâ”€â”€ queen_bee/             # Queen Beeå±¤ï¼ˆcore, llmã«ä¾å­˜ï¼‰
â”‚   â”œâ”€â”€ server.py         # MCPã‚µãƒ¼ãƒãƒ¼
â”‚   â”œâ”€â”€ communication.py  # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“é€šä¿¡
â”‚   â”œâ”€â”€ progress.py       # é€²æ—ç®¡ç†
â”‚   â”œâ”€â”€ retry.py          # ãƒªãƒˆãƒ©ã‚¤åˆ¶å¾¡
â”‚   â””â”€â”€ scheduler.py      # Colonyã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ãƒ¼
â”œâ”€â”€ worker_bee/            # Worker Beeå±¤ï¼ˆcore, llmã«ä¾å­˜ï¼‰
â”‚   â”œâ”€â”€ server.py         # MCPã‚µãƒ¼ãƒãƒ¼
â”‚   â”œâ”€â”€ process.py        # ã‚¿ã‚¹ã‚¯å®Ÿè¡Œ
â”‚   â”œâ”€â”€ projections.py    # æŠ•å½±
â”‚   â”œâ”€â”€ retry.py          # ãƒªãƒˆãƒ©ã‚¤åˆ¶å¾¡
â”‚   â”œâ”€â”€ tools.py          # ãƒ„ãƒ¼ãƒ«å®šç¾©
â”‚   â””â”€â”€ trust.py          # Trust Levelåˆ¶å¾¡
â”œâ”€â”€ llm/                   # LLMçµ±åˆï¼ˆcoreã«ä¾å­˜ï¼‰
â”‚   â”œâ”€â”€ client.py         # LLMã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ runner.py         # AgentRunner
â”‚   â”œâ”€â”€ tools.py          # LLMãƒ„ãƒ¼ãƒ«
â”‚   â”œâ”€â”€ prompts.py        # ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå–å¾—
â”‚   â”œâ”€â”€ prompt_config.py  # ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­å®šã‚¹ã‚­ãƒ¼ãƒ
â”‚   â””â”€â”€ default_prompts/  # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆYAML
â”œâ”€â”€ agent_ui/              # Agent UI MCPã‚µãƒ¼ãƒãƒ¼
â”‚   â”œâ”€â”€ server.py         # ã‚µãƒ¼ãƒãƒ¼æœ¬ä½“
â”‚   â”œâ”€â”€ session.py        # ãƒ–ãƒ©ã‚¦ã‚¶ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
â”‚   â”œâ”€â”€ tools.py          # ãƒ„ãƒ¼ãƒ«å®šç¾©
â”‚   â””â”€â”€ handlers.py       # ãƒãƒ³ãƒ‰ãƒ©ãƒ¼å®Ÿè£…
â”œâ”€â”€ vlm/                   # VLMï¼ˆç”»åƒè§£æï¼‰
â”‚   â”œâ”€â”€ analyzer.py       # ç”»åƒåˆ†æ
â”‚   â””â”€â”€ ollama_client.py  # Ollamaã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”œâ”€â”€ vlm_tester/            # VLM Testerï¼ˆE2Eãƒ†ã‚¹ãƒˆæ”¯æ´ï¼‰
â”‚   â”œâ”€â”€ server.py         # MCPã‚µãƒ¼ãƒãƒ¼
â”‚   â”œâ”€â”€ playwright_mcp_client.py
â”‚   â”œâ”€â”€ vlm_client.py
â”‚   â”œâ”€â”€ hybrid_analyzer.py
â”‚   â””â”€â”€ ...               # ãã®ä»–åˆ†æãƒ»å®Ÿè¡Œãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”œâ”€â”€ silence.py             # æ²ˆé»™æ¤œå‡ºï¼ˆcoreã«ä¾å­˜ï¼‰
â””â”€â”€ cli.py                 # CLIï¼ˆapi, mcp_serverã«ä¾å­˜ï¼‰
```

---

## 3. éšå±¤ãƒ¢ãƒ‡ãƒ«ï¼ˆHive/Colonyï¼‰

### 3.1 æ¦‚å¿µ

HiveForgeã¯4å±¤ã®éšå±¤æ§‹é€ ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ç®¡ç†ã—ã¾ã™ï¼š

```
Hiveï¼ˆçµ„ç¹”å˜ä½ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼‰
 â”œâ”€â”€ Colonyï¼ˆä½œæ¥­ãƒãƒ¼ãƒ ãƒ»ç›®æ¨™å˜ä½ï¼‰
 â”‚    â”œâ”€â”€ Runï¼ˆå®Ÿè¡Œå˜ä½ï¼‰
 â”‚    â”‚    â”œâ”€â”€ Taskï¼ˆã‚¿ã‚¹ã‚¯ï¼‰
 â”‚    â”‚    â””â”€â”€ Requirementï¼ˆç¢ºèªè¦è«‹ï¼‰
 â”‚    â””â”€â”€ Run
 â””â”€â”€ Colony
```

### 3.2 Hiveï¼ˆå·£ï¼‰

**å®šç¾©**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã‚’ç®¡ç†ã™ã‚‹æœ€ä¸Šä½ã®çµ„ç¹”å˜ä½

| å±æ€§ | å‹ | èª¬æ˜ |
|------|-----|------|
| `hive_id` | string | ä¸€æ„è­˜åˆ¥å­ï¼ˆULIDï¼‰ |
| `name` | string | Hiveå |
| `description` | string? | èª¬æ˜ |
| `status` | string | `active` \| `closed` |

**çŠ¶æ…‹é·ç§»**:
```
created â†’ active â†’ closed
```

**APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**:
- `POST /hives` - Hiveä½œæˆ
- `GET /hives` - Hiveä¸€è¦§
- `GET /hives/{hive_id}` - Hiveè©³ç´°
- `POST /hives/{hive_id}/close` - Hiveçµ‚äº†

**MCPãƒ„ãƒ¼ãƒ«**:
- `create_hive` - Hiveä½œæˆ
- `list_hives` - Hiveä¸€è¦§
- `get_hive` - Hiveè©³ç´°
- `close_hive` - Hiveçµ‚äº†

### 3.3 Colonyï¼ˆã‚³ãƒ­ãƒ‹ãƒ¼ï¼‰

**å®šç¾©**: ç‰¹å®šã®ç›®æ¨™ã‚’æŒã¤ä½œæ¥­ã‚°ãƒ«ãƒ¼ãƒ—ã€‚è¤‡æ•°ã®Runã‚’å«ã‚€ã€‚

| å±æ€§ | å‹ | èª¬æ˜ |
|------|-----|------|
| `colony_id` | string | ä¸€æ„è­˜åˆ¥å­ï¼ˆULIDï¼‰ |
| `hive_id` | string | æ‰€å±Hive ID |
| `name` | string | Colonyå |
| `goal` | string? | ç›®æ¨™èª¬æ˜ |
| `status` | string | `created` \| `running` \| `completed` \| `failed` |

**çŠ¶æ…‹é·ç§»**:
```
created â†’ running â†’ completed
                 â””â†’ failed
```

**APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**:
- `POST /hives/{hive_id}/colonies` - Colonyä½œæˆ
- `GET /hives/{hive_id}/colonies` - Colonyä¸€è¦§
- `POST /colonies/{colony_id}/start` - Colonyé–‹å§‹
- `POST /colonies/{colony_id}/complete` - Colonyå®Œäº†

**MCPãƒ„ãƒ¼ãƒ«**:
- `create_colony` - Colonyä½œæˆ
- `list_colonies` - Colonyä¸€è¦§
- `start_colony` - Colonyé–‹å§‹
- `complete_colony` - Colonyå®Œäº†

### 3.4 Run-Colonyç´ä»˜ã‘

ã‚¤ãƒ™ãƒ³ãƒˆã«ã¯`colony_id`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒã‚ã‚Šã€Runã‚’Colonyã«ç´ä»˜ã‘ã¾ã™ï¼š

```python
class BaseEvent(BaseModel):
    colony_id: str | None = None  # æ‰€å±Colony ID
```

`RunColonyProjection`ãŒColonyâ†’Runã®ãƒãƒƒãƒ”ãƒ³ã‚°ã‚’ç®¡ç†ã—ã€`ColonyProgressTracker`ãŒRunå®Œäº†æ™‚ã«Colonyã®è‡ªå‹•å®Œäº†åˆ¤å®šã‚’è¡Œã„ã¾ã™ã€‚

---

## 4. ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### 4.1 BaseEventï¼ˆã‚¤ãƒ™ãƒ³ãƒˆåŸºåº•ã‚¯ãƒ©ã‚¹ï¼‰

ã™ã¹ã¦ã®ã‚¤ãƒ™ãƒ³ãƒˆã®åŸºåº•ã¨ãªã‚‹ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ãªãƒ¢ãƒ‡ãƒ«:

```python
class BaseEvent(BaseModel):
    model_config = {"frozen": True}  # ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«
    
    id: str                    # ULIDå½¢å¼ã®ã‚¤ãƒ™ãƒ³ãƒˆID
    type: EventType            # ã‚¤ãƒ™ãƒ³ãƒˆç¨®åˆ¥
    timestamp: datetime        # ç™ºç”Ÿæ™‚åˆ»ï¼ˆUTCï¼‰
    run_id: str | None         # é–¢é€£ã™ã‚‹Runã®ID
    task_id: str | None        # é–¢é€£ã™ã‚‹Taskã®ID
    actor: str                 # ã‚¤ãƒ™ãƒ³ãƒˆç™ºç”Ÿè€…
    payload: dict[str, Any]    # ã‚¤ãƒ™ãƒ³ãƒˆãƒšã‚¤ãƒ­ãƒ¼ãƒ‰
    prev_hash: str | None      # å‰ã‚¤ãƒ™ãƒ³ãƒˆã®ãƒãƒƒã‚·ãƒ¥ï¼ˆãƒã‚§ãƒ¼ãƒ³ç”¨ï¼‰
    parents: list[str]         # è¦ªã‚¤ãƒ™ãƒ³ãƒˆã®IDï¼ˆå› æœãƒªãƒ³ã‚¯ç”¨ï¼‰
    
    @computed_field
    def hash(self) -> str:     # JCSæ­£è¦åŒ– + SHA-256
        ...
```

### 4.2 ã‚¤ãƒ™ãƒ³ãƒˆå‹ä¸€è¦§

| ã‚«ãƒ†ã‚´ãƒª | ã‚¤ãƒ™ãƒ³ãƒˆå‹ | èª¬æ˜ |
|----------|------------|------|
| **Run** | `run.started` | Runé–‹å§‹ |
| | `run.completed` | Runå®Œäº† |
| | `run.failed` | Runå¤±æ•— |
| | `run.aborted` | Runä¸­æ–­ |
| **Task** | `task.created` | Taskä½œæˆ |
| | `task.assigned` | Taskå‰²ã‚Šå½“ã¦ |
| | `task.progressed` | é€²æ—æ›´æ–° |
| | `task.completed` | Taskå®Œäº† |
| | `task.failed` | Taskå¤±æ•— |
| | `task.blocked` | Taskãƒ–ãƒ­ãƒƒã‚¯ |
| | `task.unblocked` | ãƒ–ãƒ­ãƒƒã‚¯è§£é™¤ |
| **Requirement** | `requirement.created` | è¦ä»¶ä½œæˆ |
| | `requirement.approved` | æ‰¿èª |
| | `requirement.rejected` | å´ä¸‹ |
| **LLM** | `llm.request` | LLMãƒªã‚¯ã‚¨ã‚¹ãƒˆ |
| | `llm.response` | LLMãƒ¬ã‚¹ãƒãƒ³ã‚¹ |
| **System** | `system.heartbeat` | ãƒãƒ¼ãƒˆãƒ“ãƒ¼ãƒˆ |
| | `system.error` | ã‚¨ãƒ©ãƒ¼ |
| | `system.silence_detected` | æ²ˆé»™æ¤œå‡º |
| | `system.emergency_stop` | ç·Šæ€¥åœæ­¢ |

### 4.3 RunProjectionï¼ˆçŠ¶æ…‹æŠ•å½±ï¼‰

ã‚¤ãƒ™ãƒ³ãƒˆã‹ã‚‰å°å‡ºã•ã‚Œã‚‹ç¾åœ¨çŠ¶æ…‹:

```python
class RunProjection:
    id: str                           # Run ID
    goal: str                         # ç›®æ¨™
    state: RunState                   # çŠ¶æ…‹
    started_at: datetime | None       # é–‹å§‹æ™‚åˆ»
    completed_at: datetime | None     # å®Œäº†æ™‚åˆ»
    tasks: dict[str, TaskProjection]  # ã‚¿ã‚¹ã‚¯ä¸€è¦§
    requirements: dict[str, RequirementProjection]  # è¦ä»¶ä¸€è¦§
    event_count: int                  # ã‚¤ãƒ™ãƒ³ãƒˆæ•°
    last_heartbeat: datetime | None   # æœ€çµ‚ãƒãƒ¼ãƒˆãƒ“ãƒ¼ãƒˆ
```

### 4.4 TaskProjection

```python
class TaskProjection:
    id: str
    title: str
    state: TaskState        # pending/assigned/in_progress/completed/failed/blocked
    progress: int           # 0-100
    assignee: str | None
    retry_count: int
    created_at: datetime
```

---

## 5. APIä»•æ§˜

### 5.1 REST API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

#### System

| Method | Path | èª¬æ˜ |
|--------|------|------|
| GET | `/health` | ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ |

#### Runs

| Method | Path | èª¬æ˜ |
|--------|------|------|
| POST | `/runs` | Runé–‹å§‹ |
| GET | `/runs` | Runä¸€è¦§å–å¾— |
| GET | `/runs/{run_id}` | Runè©³ç´°å–å¾— |
| POST | `/runs/{run_id}/complete` | Runå®Œäº† |
| POST | `/runs/{run_id}/emergency-stop` | ç·Šæ€¥åœæ­¢ |
| POST | `/runs/{run_id}/heartbeat` | ãƒãƒ¼ãƒˆãƒ“ãƒ¼ãƒˆé€ä¿¡ |

##### Runå®Œäº†ã®è©³ç´°

`POST /runs/{run_id}/complete` ã¯æœªå®Œäº†ã‚¿ã‚¹ã‚¯ãŒã‚ã‚‹å ´åˆã¯400ã‚¨ãƒ©ãƒ¼ã‚’è¿”ã—ã¾ã™ã€‚

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£:**
```json
{ "force": true }  // ã‚ªãƒ—ã‚·ãƒ§ãƒ³
```

**å‹•ä½œ:**
- `force=false`ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰: æœªå®Œäº†ã‚¿ã‚¹ã‚¯ãŒã‚ã‚Œã°ã‚¨ãƒ©ãƒ¼
- `force=true`: æœªå®Œäº†ã‚¿ã‚¹ã‚¯ã‚’è‡ªå‹•ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã€æœªè§£æ±ºã®ç¢ºèªè¦è«‹ã‚’è‡ªå‹•å´ä¸‹

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹:**
```json
{
  "status": "completed",
  "run_id": "01HZZ...",
  "cancelled_task_ids": ["01HZZ..."],
  "cancelled_requirement_ids": ["01HZZ..."]
}
```

##### ç·Šæ€¥åœæ­¢ã®è©³ç´°

`POST /runs/{run_id}/emergency-stop` ã¯Runã‚’å³åº§ã«åœæ­¢ã—ã¾ã™ã€‚

**å‹•ä½œ:**
- æœªå®Œäº†ã‚¿ã‚¹ã‚¯ã‚’å…¨ã¦å¤±æ•—çŠ¶æ…‹ã«
- æœªè§£æ±ºã®ç¢ºèªè¦è«‹ã‚’å…¨ã¦å´ä¸‹
- Runã‚’`ABORTED`çŠ¶æ…‹ã«é·ç§»

#### Tasks

| Method | Path | èª¬æ˜ |
|--------|------|------|
| POST | `/runs/{run_id}/tasks` | Taskä½œæˆ |
| GET | `/runs/{run_id}/tasks` | Taskä¸€è¦§å–å¾— |
| POST | `/runs/{run_id}/tasks/{task_id}/complete` | Taskå®Œäº† |
| POST | `/runs/{run_id}/tasks/{task_id}/fail` | Taskå¤±æ•— |

#### Events

| Method | Path | èª¬æ˜ |
|--------|------|------|
| GET | `/runs/{run_id}/events` | ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§å–å¾— |
| GET | `/runs/{run_id}/events/{event_id}/lineage` | å› æœãƒªãƒ³ã‚¯å–å¾— |

### 5.2 MCP ãƒ„ãƒ¼ãƒ«ä¸€è¦§

| ãƒ„ãƒ¼ãƒ« | èª¬æ˜ | ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ |
|--------|------|------------|
| `start_run` | Runé–‹å§‹ | `goal` |
| `get_run_status` | çŠ¶æ…‹å–å¾— | `run_id?` |
| `create_task` | Taskä½œæˆ | `title`, `description?` |
| `assign_task` | Taskå‰²ã‚Šå½“ã¦ | `task_id` |
| `report_progress` | é€²æ—å ±å‘Š | `task_id`, `progress`, `message?` |
| `complete_task` | Taskå®Œäº† | `task_id`, `result?` |
| `fail_task` | Taskå¤±æ•— | `task_id`, `error`, `retryable?` |
| `create_requirement` | è¦ä»¶ä½œæˆ | `description`, `options?` |
| `complete_run` | Runå®Œäº† | `summary?`, `force?` |
| `heartbeat` | ãƒãƒ¼ãƒˆãƒ“ãƒ¼ãƒˆ | `message?` |
| `emergency_stop` | ç·Šæ€¥åœæ­¢ | `reason`, `scope?` |
| `get_lineage` | å› æœãƒªãƒ³ã‚¯å–å¾— | `event_id`, `direction?`, `max_depth?` |

---

## 6. çŠ¶æ…‹æ©Ÿæ¢°

### 6.1 RunStateMachine

```
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚      RUNNING      â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚               â”‚               â”‚
        â–¼               â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ COMPLETED â”‚   â”‚  FAILED   â”‚   â”‚  ABORTED  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| é·ç§»å…ƒ | é·ç§»å…ˆ | ãƒˆãƒªã‚¬ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆ |
|--------|--------|------------------|
| RUNNING | COMPLETED | `run.completed` |
| RUNNING | FAILED | `run.failed` |
| RUNNING | ABORTED | `run.aborted`, `system.emergency_stop` |

### 6.2 TaskStateMachine

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          
â”‚ PENDING â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                          â”‚
     â”‚ task.assigned                 â”‚
     â–¼                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚ ASSIGNED â”‚                         â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                         â”‚
     â”‚ task.progressed               â”‚
     â–¼                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    task.blocked      â”‚
â”‚ IN_PROGRESS â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                â”‚     â”‚
       â”‚                       â”‚     â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
       â”‚                       â”‚     â”‚
       â–¼                       â–¼     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ COMPLETED â”‚           â”‚ BLOCKED â”‚â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â–²                       â”‚
       â”‚                       â”‚
       â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
       â””â”€â”€â”€â”€â”‚  FAILED  â”‚â—„â”€â”€â”€â”€â”€â”€â”˜
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.3 RequirementStateMachine

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PENDING â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                  â”‚
     â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ APPROVED â”‚      â”‚ REJECTED â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. ã‚¤ãƒ™ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ 

### 7.1 ã‚¤ãƒ™ãƒ³ãƒˆæ°¸ç¶šåŒ–

ã‚¤ãƒ™ãƒ³ãƒˆã¯JSONLå½¢å¼ã§ãƒ•ã‚¡ã‚¤ãƒ«ã«è¿½è¨˜ä¿å­˜:

```
Vault/
â””â”€â”€ {run_id}/
    â””â”€â”€ events.jsonl    # 1è¡Œ1ã‚¤ãƒ™ãƒ³ãƒˆ
```

### 7.2 ãƒãƒƒã‚·ãƒ¥é€£é–

å„ã‚¤ãƒ™ãƒ³ãƒˆã¯å‰ã®ã‚¤ãƒ™ãƒ³ãƒˆã®ãƒãƒƒã‚·ãƒ¥ã‚’ä¿æŒã—ã€æ”¹ã–ã‚“æ¤œçŸ¥ã‚’å¯èƒ½ã«:

```
event[0] â”€hashâ”€â–¶ event[1] â”€hashâ”€â–¶ event[2] â”€hashâ”€â–¶ ...
           â”‚              â”‚              â”‚
        prev_hash      prev_hash      prev_hash
```

### 7.3 ãƒãƒƒã‚·ãƒ¥è¨ˆç®—

1. ã‚¤ãƒ™ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã‹ã‚‰`hash`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’é™¤å¤–
2. JCS (RFC 8785) ã§æ­£è¦åŒ–
3. SHA-256ã§ãƒãƒƒã‚·ãƒ¥è¨ˆç®—

```python
def compute_hash(data: dict[str, Any]) -> str:
    data_for_hash = {k: v for k, v in data.items() if k != "hash"}
    data_for_hash = _serialize_value(data_for_hash)  # datetimeç­‰ã‚’å¤‰æ›
    canonical = jcs.canonicalize(data_for_hash)
    return hashlib.sha256(canonical).hexdigest()
```

---

## 8. å› æœãƒªãƒ³ã‚¯ï¼ˆLineageï¼‰

### 8.1 æ¦‚è¦

å„ã‚¤ãƒ™ãƒ³ãƒˆã¯`parents`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§è¦ªã‚¤ãƒ™ãƒ³ãƒˆã‚’å‚ç…§ã—ã€å› æœé–¢ä¿‚ã‚’è¨˜éŒ²:

```python
class TaskCreatedEvent(BaseEvent):
    parents: list[str] = ["run_started_event_id"]  # è¦ªã‚¤ãƒ™ãƒ³ãƒˆã®ID
```

### 8.2 æ¢ç´¢æ–¹å‘

| æ–¹å‘ | èª¬æ˜ | å®Ÿè£…æ–¹å¼ |
|------|------|----------|
| `ancestors` | ç¥–å…ˆï¼ˆè¦ªæ–¹å‘ï¼‰ | `parents[]`ã‚’å†å¸°çš„ã«è¾¿ã‚‹ |
| `descendants` | å­å­«ï¼ˆå­æ–¹å‘ï¼‰ | å…¨ã‚¤ãƒ™ãƒ³ãƒˆèµ°æŸ» |
| `both` | ä¸¡æ–¹å‘ | ä¸Šè¨˜ã®çµ„ã¿åˆã‚ã› |

### 8.3 APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹

```json
{
  "event_id": "01HZZ...",
  "ancestors": ["01HZY...", "01HZX..."],
  "descendants": ["01J00...", "01J01..."],
  "truncated": false
}
```

### 8.4 åˆ¶é™

- `max_depth`: æ¢ç´¢æ·±åº¦åˆ¶é™ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 10ï¼‰
- `truncated`: åˆ¶é™ã«ã‚ˆã‚Šåˆ‡ã‚Šè©°ã‚ã‚‰ã‚ŒãŸå ´åˆ`true`

---

## 9. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

### 9.1 ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
HiveForge/
â”œâ”€â”€ src/hiveforge/           # ãƒ¡ã‚¤ãƒ³ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ cli.py               # CLIã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ silence.py           # æ²ˆé»™æ¤œå‡º
â”‚   â”œâ”€â”€ core/                # ã‚³ã‚¢ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”‚   â”‚   â”œâ”€â”€ config.py        # è¨­å®šç®¡ç†
â”‚   â”‚   â”œâ”€â”€ events.py        # ã‚¤ãƒ™ãƒ³ãƒˆãƒ¢ãƒ‡ãƒ«
â”‚   â”‚   â”œâ”€â”€ activity_bus.py  # Activity Bus
â”‚   â”‚   â”œâ”€â”€ lineage.py       # å› æœãƒªãƒ³ã‚¯
â”‚   â”‚   â”œâ”€â”€ policy_gate.py   # ãƒãƒªã‚·ãƒ¼ã‚²ãƒ¼ãƒˆ
â”‚   â”‚   â”œâ”€â”€ rate_limiter.py  # ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒã‚¿ãƒ¼
â”‚   â”‚   â”œâ”€â”€ models/          # ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«
â”‚   â”‚   â”‚   â”œâ”€â”€ action_class.py
â”‚   â”‚   â”‚   â””â”€â”€ project_contract.py
â”‚   â”‚   â”œâ”€â”€ ar/              # Akashic Record
â”‚   â”‚   â”‚   â”œâ”€â”€ storage.py       # Runæ°¸ç¶šåŒ–
â”‚   â”‚   â”‚   â”œâ”€â”€ projections.py   # RunçŠ¶æ…‹æŠ•å½±
â”‚   â”‚   â”‚   â”œâ”€â”€ hive_storage.py  # Hive/Colonyæ°¸ç¶šåŒ–
â”‚   â”‚   â”‚   â””â”€â”€ hive_projections.py # Hive/ColonyæŠ•å½±
â”‚   â”‚   â””â”€â”€ state/           # çŠ¶æ…‹æ©Ÿæ¢°
â”‚   â”‚       â”œâ”€â”€ machines.py       # Run/Task/Requirement SM
â”‚   â”‚       â”œâ”€â”€ projections.py    # çŠ¶æ…‹æŠ•å½±
â”‚   â”‚       â”œâ”€â”€ colony_progress.py # Colonyé€²æ—è¿½è·¡
â”‚   â”‚       â””â”€â”€ conference.py     # ConferenceçŠ¶æ…‹
â”‚   â”œâ”€â”€ api/                 # REST API
â”‚   â”‚   â”œâ”€â”€ server.py        # FastAPIã‚¢ãƒ—ãƒª
â”‚   â”‚   â”œâ”€â”€ dependencies.py  # ä¾å­˜æ€§æ³¨å…¥ï¼ˆAppStateï¼‰
â”‚   â”‚   â”œâ”€â”€ helpers.py       # å¾Œæ–¹äº’æ›ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”‚   â”‚   â”œâ”€â”€ models.py        # APIãƒ¢ãƒ‡ãƒ«
â”‚   â”‚   â””â”€â”€ routes/          # ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”‚       â”œâ”€â”€ runs.py
â”‚   â”‚       â”œâ”€â”€ tasks.py
â”‚   â”‚       â”œâ”€â”€ events.py
â”‚   â”‚       â”œâ”€â”€ requirements.py
â”‚   â”‚       â”œâ”€â”€ hives.py         # Hive CRUD
â”‚   â”‚       â”œâ”€â”€ colonies.py      # Colony CRUD
â”‚   â”‚       â”œâ”€â”€ activity.py      # Activity API
â”‚   â”‚       â”œâ”€â”€ conferences.py   # Conference API
â”‚   â”‚       â”œâ”€â”€ interventions.py # Intervention API
â”‚   â”‚       â””â”€â”€ system.py
â”‚   â”œâ”€â”€ mcp_server/          # MCP Server
â”‚   â”‚   â”œâ”€â”€ server.py
â”‚   â”‚   â”œâ”€â”€ tools.py         # ãƒ„ãƒ¼ãƒ«å®šç¾©
â”‚   â”‚   â””â”€â”€ handlers/        # ãƒãƒ³ãƒ‰ãƒ©ãƒ¼å®Ÿè£…
â”‚   â”œâ”€â”€ beekeeper/           # Beekeeperå±¤
â”‚   â”‚   â”œâ”€â”€ server.py        # MCPã‚µãƒ¼ãƒãƒ¼
â”‚   â”‚   â”œâ”€â”€ handler.py       # ã‚³ã‚¢ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
â”‚   â”‚   â”œâ”€â”€ session.py       # ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ projection.py    # çŠ¶æ…‹æŠ•å½±
â”‚   â”‚   â”œâ”€â”€ conference.py    # Conferenceæ©Ÿèƒ½
â”‚   â”‚   â”œâ”€â”€ conflict.py      # è¡çªæ¤œå‡º
â”‚   â”‚   â”œâ”€â”€ escalation.py    # ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”‚   â””â”€â”€ resolver.py      # è¡çªè§£æ±º
â”‚   â”œâ”€â”€ queen_bee/           # Queen Beeå±¤
â”‚   â”‚   â”œâ”€â”€ server.py        # MCPã‚µãƒ¼ãƒãƒ¼
â”‚   â”‚   â”œâ”€â”€ communication.py # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“é€šä¿¡
â”‚   â”‚   â”œâ”€â”€ progress.py      # é€²æ—ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ retry.py         # ãƒªãƒˆãƒ©ã‚¤åˆ¶å¾¡
â”‚   â”‚   â””â”€â”€ scheduler.py     # Colony ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ãƒ¼
â”‚   â”œâ”€â”€ worker_bee/          # Worker Beeå±¤
â”‚   â”‚   â”œâ”€â”€ server.py        # MCPã‚µãƒ¼ãƒãƒ¼
â”‚   â”‚   â”œâ”€â”€ process.py       # ã‚¿ã‚¹ã‚¯å®Ÿè¡Œ
â”‚   â”‚   â”œâ”€â”€ projections.py   # æŠ•å½±
â”‚   â”‚   â”œâ”€â”€ retry.py         # ãƒªãƒˆãƒ©ã‚¤åˆ¶å¾¡
â”‚   â”‚   â”œâ”€â”€ tools.py         # ãƒ„ãƒ¼ãƒ«å®šç¾©
â”‚   â”‚   â””â”€â”€ trust.py         # Trust Levelåˆ¶å¾¡
â”‚   â”œâ”€â”€ llm/                 # LLMçµ±åˆ
â”‚   â”‚   â”œâ”€â”€ client.py        # LLMã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ runner.py        # AgentRunner
â”‚   â”‚   â”œâ”€â”€ tools.py         # LLMãƒ„ãƒ¼ãƒ«
â”‚   â”‚   â”œâ”€â”€ prompts.py       # ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå–å¾—
â”‚   â”‚   â”œâ”€â”€ prompt_config.py # ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­å®šã‚¹ã‚­ãƒ¼ãƒ
â”‚   â”‚   â””â”€â”€ default_prompts/ # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆYAML
â”‚   â”œâ”€â”€ agent_ui/            # Agent UI MCPã‚µãƒ¼ãƒãƒ¼
â”‚   â”‚   â”œâ”€â”€ server.py        # ã‚µãƒ¼ãƒãƒ¼æœ¬ä½“
â”‚   â”‚   â”œâ”€â”€ session.py       # ãƒ–ãƒ©ã‚¦ã‚¶ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ tools.py         # ãƒ„ãƒ¼ãƒ«å®šç¾©
â”‚   â”‚   â””â”€â”€ handlers.py      # ãƒãƒ³ãƒ‰ãƒ©ãƒ¼å®Ÿè£…
â”‚   â”œâ”€â”€ vlm/                 # VLMï¼ˆç”»åƒè§£æï¼‰
â”‚   â”‚   â”œâ”€â”€ analyzer.py      # ç”»åƒåˆ†æ
â”‚   â”‚   â””â”€â”€ ollama_client.py # Ollamaã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â””â”€â”€ vlm_tester/          # VLM Testerï¼ˆE2Eãƒ†ã‚¹ãƒˆæ”¯æ´ï¼‰
â”‚       â”œâ”€â”€ server.py        # MCPã‚µãƒ¼ãƒãƒ¼
â”‚       â”œâ”€â”€ playwright_mcp_client.py
â”‚       â”œâ”€â”€ vlm_client.py
â”‚       â”œâ”€â”€ hybrid_analyzer.py
â”‚       â”œâ”€â”€ action_executor.py
â”‚       â”œâ”€â”€ local_analyzers.py
â”‚       â”œâ”€â”€ screen_capture.py
â”‚       â””â”€â”€ vlm_providers.py
â”œâ”€â”€ tests/                   # Pythonãƒ†ã‚¹ãƒˆï¼ˆ`pytest` ã§ä»¶æ•°ç¢ºèªï¼‰
â”‚   â”œâ”€â”€ conftest.py
â”‚   â”œâ”€â”€ test_*.py            # å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å¯¾å¿œãƒ†ã‚¹ãƒˆ
â”‚   â””â”€â”€ e2e/                 # E2Eãƒ†ã‚¹ãƒˆ
â”‚       â”œâ”€â”€ test_hiveforge_visual.py
â”‚       â”œâ”€â”€ test_hiveforge_extension.py
â”‚       â””â”€â”€ test_hive_flow.py
â”œâ”€â”€ vscode-extension/        # VS Codeæ‹¡å¼µ
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ extension.ts
â”‚       â”œâ”€â”€ client.ts        # APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚       â”œâ”€â”€ commands/        # ã‚³ãƒãƒ³ãƒ‰å®Ÿè£…
â”‚       â”‚   â”œâ”€â”€ hiveCommands.ts
â”‚       â”‚   â”œâ”€â”€ colonyCommands.ts
â”‚       â”‚   â”œâ”€â”€ runCommands.ts
â”‚       â”‚   â”œâ”€â”€ taskCommands.ts
â”‚       â”‚   â”œâ”€â”€ requirementCommands.ts
â”‚       â”‚   â”œâ”€â”€ decisionCommands.ts
â”‚       â”‚   â””â”€â”€ filterCommands.ts
â”‚       â”œâ”€â”€ providers/       # TreeViewãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼
â”‚       â”œâ”€â”€ views/           # Webviewãƒ‘ãƒãƒ«
â”‚       â”‚   â”œâ”€â”€ dashboardPanel.ts
â”‚       â”‚   â”œâ”€â”€ hiveMonitorPanel.ts
â”‚       â”‚   â”œâ”€â”€ hiveTreeView.ts
â”‚       â”‚   â”œâ”€â”€ agentMonitorPanel.ts
â”‚       â”‚   â””â”€â”€ requirementDetailView.ts
â”‚       â”œâ”€â”€ utils/           # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚       â””â”€â”€ test/            # ãƒ†ã‚¹ãƒˆ
â”‚           â”œâ”€â”€ client.test.ts
â”‚           â”œâ”€â”€ html.test.ts
â”‚           â””â”€â”€ vscode-mock.ts
â”œâ”€â”€ docs/                    # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ ARCHITECTURE.md
â”‚   â”œâ”€â”€ DEVELOPMENT_PLAN_v1.md
â”‚   â”œâ”€â”€ QUICKSTART.md
â”‚   â”œâ”€â”€ VLM_TESTER.md
â”‚   â”œâ”€â”€ ã‚³ãƒ³ã‚»ãƒ—ãƒˆ_v5.md
â”‚   â””â”€â”€ archive/             # æ—§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”œâ”€â”€ Vault/                   # ã‚¤ãƒ™ãƒ³ãƒˆãƒ­ã‚°ï¼ˆgitignoreï¼‰
â”œâ”€â”€ AGENTS.md                # AIé–‹ç™ºã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³
â”œâ”€â”€ pyproject.toml           # Pythonãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š
â”œâ”€â”€ hiveforge.config.yaml    # å®Ÿè¡Œæ™‚è¨­å®š
â”œâ”€â”€ docker-compose.yml       # Dockerè¨­å®š
â””â”€â”€ Dockerfile
```

### 9.2 Vaultæ§‹é€ 

```
Vault/
â”œâ”€â”€ hive-{hive_id}/
â”‚   â””â”€â”€ events.jsonl         # ã‚¤ãƒ™ãƒ³ãƒˆãƒ­ã‚°ï¼ˆ1è¡Œ1ã‚¤ãƒ™ãƒ³ãƒˆï¼‰
â”œâ”€â”€ meta-decisions/          # æ„æ€æ±ºå®šãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
â””â”€â”€ ...
```

---

## 10. è¨­å®š

### 10.1 hiveforge.config.yaml

```yaml
hive:
  name: "poc-project"
  vault_path: "./Vault"

governance:
  max_retries: 3              # ã‚¿ã‚¹ã‚¯ã®æœ€å¤§ãƒªãƒˆãƒ©ã‚¤å›æ•°
  max_oscillations: 5         # çŠ¶æ…‹æŒ¯å‹•æ¤œå‡ºé–¾å€¤
  max_concurrent_tasks: 10    # åŒæ™‚å®Ÿè¡Œã‚¿ã‚¹ã‚¯æ•°ä¸Šé™
  task_timeout_seconds: 300   # ã‚¿ã‚¹ã‚¯ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼ˆç§’ï¼‰
  heartbeat_interval_seconds: 30  # ãƒãƒ¼ãƒˆãƒ“ãƒ¼ãƒˆé–“éš”
  approval_timeout_hours: 24  # æ‰¿èªå¾…ã¡ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
  archive_after_days: 7       # ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–æ—¥æ•°

llm:
  provider: "openai"
  model: "gpt-4o"
  api_key_env: "OPENAI_API_KEY"
  max_tokens: 4096
  temperature: 0.2

auth:
  enabled: false              # APIèªè¨¼ï¼ˆPOCã§ã¯ç„¡åŠ¹ï¼‰
  api_key_env: "HIVEFORGE_API_KEY"

server:
  host: "0.0.0.0"
  port: 8000

logging:
  level: "INFO"
  events_max_file_size_mb: 100
```

### 10.2 ç’°å¢ƒå¤‰æ•°

| å¤‰æ•°å | èª¬æ˜ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ |
|--------|------|------------|
| `HIVEFORGE_VAULT_PATH` | Vaultãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ‘ã‚¹ | `./Vault` |
| `OPENAI_API_KEY` | OpenAI APIã‚­ãƒ¼ | - |
| `HIVEFORGE_API_KEY` | HiveForge APIèªè¨¼ã‚­ãƒ¼ | - |

---

## 11. é–‹ç™ºè¨ˆç”»ãƒ»ã‚²ãƒ¼ãƒˆæ¡ä»¶

### 11.1 æ¦‚è¦

é–‹ç™ºã®é€²æ—ç®¡ç†ã¯ãƒ•ã‚§ãƒ¼ã‚ºãƒ™ãƒ¼ã‚¹ã‹ã‚‰ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ãƒ™ãƒ¼ã‚¹ã«ç§»è¡Œã—ã¾ã—ãŸã€‚
è©³ç´°ã¯ [DEVELOPMENT_PLAN_v1.md](DEVELOPMENT_PLAN_v1.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

### 11.2 ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³

| ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ | ç›®æ¨™ | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
|---------------|------|----------|
| M1: åŸºç›¤å›ºã‚ | ARç§»è¡Œã€ã‚¹ã‚¿ãƒ–è§£æ¶ˆã€å‹å®‰å…¨ | ğŸ”„ é€²è¡Œä¸­ |
| M2: æ¥ç¶š | VS Codeâ†”APIã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“E2E | è¨ˆç”»ä¸­ |
| M3: è‡ªå¾‹ | LLMã‚¿ã‚¹ã‚¯åˆ†è§£ã€Orchestrator | è¨ˆç”»ä¸­ |
| M4: é‹ç”¨å“è³ª | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€CI/CDã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ | è¨ˆç”»ä¸­ |

### 11.3 ã‚²ãƒ¼ãƒˆæ¡ä»¶

ä»¥ä¸‹ã¯å„ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ã®é€šéã«å¿…è¦ãªè¦ä»¶ã‚²ãƒ¼ãƒˆã§ã™:

| ID | æ¡ä»¶ | æ¤œè¨¼æ–¹æ³• | çŠ¶æ…‹ |
|----|------|----------|------|
| G-01 | Colonyé–“è¡çªæ¤œå‡ºãŒå®Ÿè£…æ¸ˆã¿ | `CONFLICT_DETECTED` ã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œå¯èƒ½ | âœ… |
| G-02 | è¡çªè§£æ±ºãƒ—ãƒ­ãƒˆã‚³ãƒ«ãŒå®šç¾©æ¸ˆã¿ | `CONFLICT_RESOLVED` ã‚¤ãƒ™ãƒ³ãƒˆã¨ãƒãƒ¼ã‚¸ãƒ«ãƒ¼ãƒ« | âœ… |
| G-03 | æ¨™æº–å¤±æ•—ç†ç”±ã®åˆ†é¡ãŒå®Œäº† | `FailureReason` enum ã®ä½¿ç”¨ | âœ… |
| G-04 | ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ¤œå‡ºãŒå®Ÿè£…æ¸ˆã¿ | `OPERATION_TIMEOUT` ã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œ | âœ… |
| G-05 | Action ClassãŒå®Ÿè£…æ¸ˆã¿ | `ActionClass`, `TrustLevel` ã«ã‚ˆã‚‹åˆ†é¡ | âœ… |
| G-06 | ç¢ºèªè¦æ±‚ãƒãƒˆãƒªã‚¯ã‚¹ãŒå®šç¾©æ¸ˆã¿ | `requires_confirmation()` é–¢æ•° | âœ… |
| G-07 | Conference ãƒ¢ãƒ¼ãƒ‰ãŒå‹•ä½œ | `CONFERENCE_STARTED/ENDED` ã‚¤ãƒ™ãƒ³ãƒˆ | âœ… |
| G-08 | Hive/ColonyãŒARæ°¸ç¶šåŒ– | ã‚µãƒ¼ãƒãƒ¼å†èµ·å‹•å¾Œã‚‚ãƒ‡ãƒ¼ã‚¿ç¶­æŒ | M1 |
| G-09 | Beekeeperã®å…¨ãƒãƒ³ãƒ‰ãƒ©ãŒå®Ÿè£… | TODOã‚¹ã‚¿ãƒ–ãŒã‚¼ãƒ­ | M1 |
| G-10 | E2Eã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒã‚§ãƒ¼ãƒ³ãŒå‹•ä½œ | Beekeeperâ†’Queenâ†’Workerå®Œèµ° | M2 |
| G-11 | LLMã‚¿ã‚¹ã‚¯åˆ†è§£ãŒå‹•ä½œ | æŠ½è±¡ç›®æ¨™â†’è¤‡æ•°ã‚¿ã‚¹ã‚¯è‡ªå‹•åˆ†è§£ | M3 |

---

## 12. ä»Šå¾Œã®æ‹¡å¼µ

### 12.1 ä¸»è¦ãªè¨ˆç”»

- [x] Worker Bee: MCPã‚µãƒ–ãƒ—ãƒ­ã‚»ã‚¹ãƒ™ãƒ¼ã‚¹ã®Worker
- [x] Queen Beeé€£æº: ã‚¿ã‚¹ã‚¯å‰²ã‚Šå½“ã¦ã€é€²æ—é›†ç´„ã€ãƒªãƒˆãƒ©ã‚¤
- [x] Colonyå„ªå…ˆåº¦: é™çš„è¨­å®šãƒ™ãƒ¼ã‚¹ã®ãƒªã‚½ãƒ¼ã‚¹é…åˆ†
- [ ] LLM Orchestrator: è‡ªå¾‹çš„ãªã‚¿ã‚¹ã‚¯åˆ†è§£ãƒ»å®Ÿè¡Œ (M3)
- [ ] Artifactç®¡ç†: æˆæœç‰©ã®ä¿å­˜ã¨å‚ç…§
- [ ] å› æœãƒªãƒ³ã‚¯ã®è‡ªå‹•è¨­å®šï¼ˆ[Issue #001](issues/001-lineage-auto-parents.md)ï¼‰
- [ ] ã‚¤ãƒ™ãƒ³ãƒˆç½²å: æ”¹ã–ã‚“è€…ã®ç‰¹å®š

### 12.2 VS Codeæ‹¡å¼µã®æ‹¡å……

- [x] Hive Monitor: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ´»å‹•å¯è¦–åŒ–ï¼ˆWebviewï¼‰
- [x] TreeView: Activity Hierarchy APIé€£å‹•
- [ ] å› æœã‚°ãƒ©ãƒ•å¯è¦–åŒ–ï¼ˆWebviewï¼‰
- [ ] ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ãƒˆãƒªãƒ¼ãƒ 

### 12.3 ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£

- [ ] ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£åˆ¥ãƒã‚§ãƒ¼ãƒ³ï¼ˆä¸¦åˆ—æ›¸ãè¾¼ã¿å¯¾å¿œï¼‰
- [ ] ã‚¤ãƒ™ãƒ³ãƒˆã‚¢ãƒ¼ã‚«ã‚¤ãƒ–
- [ ] åˆ†æ•£ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å¯¾å¿œ

---

## å‚ç…§

- [DEVELOPMENT_PLAN_v1.md](DEVELOPMENT_PLAN_v1.md) - é–‹ç™ºè¨ˆç”»ï¼ˆé€²æ—ã®æ­£ï¼‰
- [QUICKSTART.md](QUICKSTART.md) - å‹•ä½œç¢ºèªæ‰‹é †
- [AGENTS.md](../AGENTS.md) - AIé–‹ç™ºã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³
- [ã‚³ãƒ³ã‚»ãƒ—ãƒˆ_v5.md](%E3%82%B3%E3%83%B3%E3%82%BB%E3%83%97%E3%83%88_v5.md) - è¨­è¨ˆæ€æƒ³ï¼ˆæœ€æ–°ç‰ˆï¼‰
